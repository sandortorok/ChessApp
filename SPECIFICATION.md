# üìã ChessApp - Teljes M≈±szaki Specifik√°ci√≥

## üìñ Tartalomjegyz√©k
- [1. Projekt √Åttekint√©s](#1-projekt-√°ttekint√©s)
  - [1.1 Projekt Neve](#11-projekt-neve)
  - [1.2 Verzi√≥](#12-verzi√≥)
  - [1.3 C√©l](#13-c√©l)
  - [1.4 C√©lk√∂z√∂ns√©g](#14-c√©lk√∂z√∂ns√©g)
- [2. A Rendszer C√©lja, Funkci√≥i √©s K√∂rnyezete](#2-a-rendszer-c√©lja-funkci√≥i-√©s-k√∂rnyezete)
  - [2.1 Feladatki√≠r√°s](#21-feladatki√≠r√°s)
  - [2.2 A Rendszer √°ltal Biztos√≠tand√≥ Tipikus Funkci√≥k](#22-a-rendszer-√°ltal-biztos√≠tand√≥-tipikus-funkci√≥k)
  - [2.3 A Program K√∂rnyezete](#23-a-program-k√∂rnyezete)
- [3. Technol√≥giai Stack](#3-technol√≥giai-stack)
- [4. Megval√≥s√≠t√°s - Architekt√∫ra](#4-megval√≥s√≠t√°s---architekt√∫ra)
- [5. Adat- √©s Adatb√°zisterv](#5-adat--√©s-adatb√°zisterv)
- [6. Adatb√°zis Entit√°sok (Objektummodell)](#6-adatb√°zis-entit√°sok-objektummodell)
- [7. Funkcion√°lis K√∂vetelm√©nyek](#7-funkcion√°lis-k√∂vetelm√©nyek)
- [8. Komponensek](#8-komponensek)
- [9. Service Layer](#9-service-layer)
- [10. GUI-terv](#10-gui-terv)
- [11. Routing & Navig√°ci√≥](#11-routing--navig√°ci√≥)
- [12. Biztons√°gi K√∂vetelm√©nyek](#12-biztons√°gi-k√∂vetelm√©nyek)
- [13. Telep√≠t√©si Le√≠r√°s](#13-telep√≠t√©si-le√≠r√°s)
- [14. A Program K√©sz√≠t√©se Sor√°n Felhaszn√°lt Eszk√∂z√∂k](#14-a-program-k√©sz√≠t√©se-sor√°n-felhaszn√°lt-eszk√∂z√∂k)
- [15. Tervez√©si Mint√°k](#15-tervez√©si-mint√°k)
- [16. √ñsszefoglal√°s](#16-√∂sszefoglal√°s)

---

## 1. Projekt √Åttekint√©s

### 1.1 Projekt Neve
**ChessApp** - Val√≥s idej≈± online sakk platform

### 1.2 Verzi√≥
**v0.0.0** (fejleszt√©s alatt)

### 1.3 C√©l
Egy modern, val√≥s idej≈±, t√∂bb j√°t√©kos √°ltal haszn√°lhat√≥ online sakk alkalmaz√°s fejleszt√©se, amely t√°mogatja:
- Emberi j√°t√©kosok k√∂z√∂tti m√©rk≈ëz√©seket
- AI elleni j√°t√©kot (Lichess API integr√°ci√≥)
- ELO rangsor rendszer
- Val√≥s idej≈± chat
- J√°t√©kt√∂rt√©net √©s visszaj√°tsz√°s
- Teljes k√∂r≈± felhaszn√°l√≥ kezel√©s

### 1.4 C√©lk√∂z√∂ns√©g
- Sakk rajong√≥k
- Amat≈ër √©s versenyz≈ëk
- Casual j√°t√©kosok

---

## 2. A Rendszer C√©lja, Funkci√≥i √©s K√∂rnyezete

### 2.1 Feladatki√≠r√°s

A ChessApp egy modern, webalap√∫ sakkalkalmaz√°s, amely lehet≈ëv√© teszi j√°t√©kosok sz√°m√°ra, hogy val√≥s id≈ëben j√°tszhassanak egym√°s ellen vagy AI ellen. A rendszer c√©lja egy teljes k√∂r≈± sakk platform biztos√≠t√°sa, amely tartalmazza:

- **Val√≥s idej≈± t√∂bbj√°t√©kos sakk**: J√°t√©kosok egym√°s ellen j√°tszhatnak azonos id≈ëben
- **AI ellenf√©l integr√°ci√≥**: Lichess API haszn√°lat√°val 8 neh√©zs√©gi szint
- **Rangsor rendszer**: ELO alap√∫ versenyszer≈± √©rt√©kel√©s
- **J√°t√©kt√∂rt√©net**: Minden j√°t√©k ment√©se √©s visszaj√°tszhat√≥s√°ga
- **Felhaszn√°l√≥ kezel√©s**: Regisztr√°ci√≥, bejelentkez√©s, profil kezel√©s
- **K√∂z√∂ss√©gi funkci√≥k**: Lobby, leaderboard, chat (tervezett)

**F≈ë k√∂vetelm√©nyek**:
- Gyors, responsive webes fel√ºlet
- Real-time szinkroniz√°ci√≥ j√°t√©kosok k√∂z√∂tt
- Biztons√°gos authentik√°ci√≥ √©s adatkezel√©s
- Sk√°l√°zhat√≥ backend infrastrukt√∫ra
- Cross-platform kompatibilit√°s (asztali, mobil b√∂ng√©sz≈ëk)

---

### 2.2 A Rendszer √°ltal Biztos√≠tand√≥ Tipikus Funkci√≥k

#### J√°t√©k Funkci√≥k
- ‚úÖ √öj j√°t√©k l√©trehoz√°sa (id≈ëkorl√°t, increment, AI/human)
- ‚úÖ Akt√≠v j√°t√©kokhoz csatlakoz√°s (lobby)
- ‚úÖ Val√≥s idej≈± l√©p√©s szinkroniz√°ci√≥
- ‚úÖ Sakk√≥ra kezel√©s (Fischer √≥ra)
- ‚úÖ L√©p√©st√∂rt√©net megjelen√≠t√©s √©s navig√°ci√≥
- ‚úÖ Automatikus j√°t√©k v√©ge detekci√≥ (matt, patt, id≈ët√∫ll√©p√©s, stb.)
- ‚úÖ D√∂ntetlen aj√°nl√°s √©s elfogad√°s
- ‚úÖ Felad√°s √©s megszak√≠t√°s
- ‚úÖ AI elleni j√°t√©k (Lichess integr√°ci√≥)
- üîÆ Hint rendszer (Cloud Evaluation - tervezett UI)

#### Felhaszn√°l√≥ Kezel√©s
- ‚úÖ Regisztr√°ci√≥ email/jelsz√≥val
- ‚úÖ Bejelentkez√©s Google OAuth-tal
- ‚úÖ Vend√©g (guest) hozz√°f√©r√©s
- ‚úÖ Profil szerkeszt√©s (n√©v, avatar, jelsz√≥)
- ‚úÖ ELO rangsor nyomon k√∂vet√©s
- ‚úÖ Statisztik√°k (gy≈ëzelem, veres√©g, d√∂ntetlen)

#### K√∂z√∂ss√©gi Funkci√≥k
- ‚úÖ Lobby (akt√≠v j√°t√©kok b√∂ng√©sz√©se)
- ‚úÖ J√°t√©kt√∂rt√©net (saj√°t befejezett j√°t√©kok)
- ‚úÖ Leaderboard (top 100 j√°t√©kos)
- ‚úÖ J√°t√©kos profil megtekint√©s
- üîÆ Chat rendszer (tervezett backend)
- üîÆ Bar√°t rendszer (tervezett)

#### Adminisztrat√≠v Funkci√≥k
- ‚úÖ Automatikus ELO friss√≠t√©s j√°t√©k v√©g√©n
- ‚úÖ Automatikus statisztika sz√°m√≠t√°s
- ‚úÖ Realtime adatszinkroniz√°ci√≥
- üîÆ J√°t√©k moder√°ci√≥ (tervezett)
- üîÆ User banning (tervezett)

---

### 2.3 A Program K√∂rnyezete

#### Kliens Oldal
**Platform**: Webes alkalmaz√°s (modern b√∂ng√©sz≈ëk)

**T√°mogatott B√∂ng√©sz≈ëk**:
- Chrome 90+ (aj√°nlott)
- Firefox 88+
- Safari 14+
- Edge 90+
- Opera 76+

**Hardver K√∂vetelm√©nyek**:
- **Minimum**: 2 GB RAM, dual-core CPU
- **Aj√°nlott**: 4 GB RAM, quad-core CPU
- **Mobil**: iOS 14+, Android 8.0+

**K√©perny≈ëfelbont√°s**:
- Minimum: 1280x720 (HD)
- Aj√°nlott: 1920x1080 (Full HD)
- T√°mogatott: 320px - 4K (responsive design)

---

#### Szerver Oldal

**Backend as a Service (BaaS)**: Firebase

**Infrastrukt√∫ra Komponensek**:
- **Firebase Realtime Database**: J√°t√©k √°llapot t√°rol√°s (NoSQL)
- **Cloud Firestore**: Felhaszn√°l√≥i profilok, statisztik√°k (dokumentum DB)
- **Firebase Authentication**: Email, Google OAuth, Anonymous
- **Firebase Storage**: Avatar k√©pek t√°rol√°s (blob storage)
- **Firebase Hosting**: Static site hosting (CDN)
- **Firebase Functions**: Serverless backend logika (Node.js)

**K√ºls≈ë API-k**:
- **Lichess.org API**: AI j√°t√©k, cloud evaluation
- **URL**: `https://lichess.org/api/`
- **Rate Limit**: 100 req/min (Board API), ‚àû (Cloud Eval)

---

#### H√°l√≥zati K√∂vetelm√©nyek

**Internet Kapcsolat**:
- Minimum: 1 Mbps (let√∂lt√©s/felt√∂lt√©s)
- Aj√°nlott: 5+ Mbps (stabil real-time sync-hez)
- Latency: < 200ms (optim√°lis j√°t√©k√©lm√©ny)

**Protokollok**:
- HTTPS (REST API)
- WebSocket (Firebase Realtime Database)
- EventSource (Lichess streaming)

---

#### Fejleszt≈ëi K√∂rnyezet

**Oper√°ci√≥s Rendszer**: Windows, macOS, Linux

**Node.js**: v18+ (LTS)

**Package Manager**: npm vagy yarn

**IDE**: Visual Studio Code (aj√°nlott), WebStorm, vagy b√°rmely modern editor

**Git**: Verzi√≥kezel√©s (GitHub: sandortorok/ChessApp)

**Firebase CLI**: `npm install -g firebase-tools`

---

#### Produkci√≥ K√∂rnyezet

**Hosting**: Firebase Hosting
- URL: `https://bme-chessapp.web.app`
- CDN: Global edge network
- SSL: Automatikus HTTPS

**Deployment**: Manu√°lis (`firebase deploy`)

**Monitoring**: Firebase Console (realtime metrics)

**Backup**: Automatikus (Firebase managed)

**Scaling**: Automatikus (Firebase serverless architecture)

---

## 3. Technol√≥giai Stack

### 2.1 Frontend
- **Framework**: React 19.1.1
- **Language**: TypeScript 5.8.3
- **Build Tool**: Vite 7.1.7
- **Styling**: 
  - Tailwind CSS 4.1.14
  - Lucide React Icons
  - Heroicons
- **Routing**: React Router DOM 7.9.3
- **Chess Logic**: Chess.js 1.4.0
- **Chess UI**: React Chessboard 5.6.1
- **UI Components**: Headless UI 2.2.9

### 2.2 Backend & Services
- **BaaS**: Firebase (v12.3.0)
  - Authentication (Email/Password, Google, Anonymous/Guest)
  - Realtime Database (j√°t√©k √°llapot t√°rol√°s)
  - Firestore (felhaszn√°l√≥i profilok, statisztik√°k)
  - Storage (avatar k√©pek)
  - Hosting (production deployment)
  - Functions (Node.js backend logika - jelenleg minim√°lis)

### 2.3 K√ºls≈ë API-k
- **Lichess API**: 
  - AI ellenf√©l integr√°ci√≥hoz
  - Lichess Board API
  - Cloud Evaluation API

### 2.4 Development Tools
- **Linter**: ESLint 9.36.0
- **Type Checking**: TypeScript
- **Package Manager**: npm

---

## 4. Megval√≥s√≠t√°s - Architekt√∫ra

### 3.1 R√©tegzett Architekt√∫ra (Layered Architecture)

A ChessApp **4-r√©teg≈± architekt√∫r√°t** haszn√°l, amely elv√°lasztja a k√ºl√∂nb√∂z≈ë felel≈ëss√©gi k√∂r√∂ket:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    PRESENTATION LAYER (React)                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ    Pages     ‚îÇ  ‚îÇ  Components  ‚îÇ  ‚îÇ    Hooks     ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ - Home       ‚îÇ  ‚îÇ - Header     ‚îÇ  ‚îÇ - useAuth    ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ - Lobby      ‚îÇ  ‚îÇ - PlayerInfo ‚îÇ  ‚îÇ - (custom)   ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ - Game       ‚îÇ  ‚îÇ - ChessClock ‚îÇ  ‚îÇ              ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ - MyGames    ‚îÇ  ‚îÇ - Modals     ‚îÇ  ‚îÇ              ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ - Leaderboard‚îÇ  ‚îÇ - Forms      ‚îÇ  ‚îÇ              ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ - Settings   ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  Felel≈ëss√©g: UI renderel√©s, user interakci√≥k, routing           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ Props, Callbacks, State
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      BUSINESS LOGIC LAYER                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ                       Services                            ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ gameService ‚îÇ  ‚îÇplayerService ‚îÇ  ‚îÇ aiGameService   ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ                 ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - create    ‚îÇ  ‚îÇ - join       ‚îÇ  ‚îÇ - startAIGame   ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - update    ‚îÇ  ‚îÇ - getData    ‚îÇ  ‚îÇ - streamState   ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - endGame   ‚îÇ  ‚îÇ - getTime    ‚îÇ  ‚îÇ - makeMove      ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - calcELO   ‚îÇ  ‚îÇ - getSide    ‚îÇ  ‚îÇ - getHint       ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇuserService  ‚îÇ  ‚îÇlichessService‚îÇ                      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ              ‚îÇ                      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - profile   ‚îÇ  ‚îÇ - challenge  ‚îÇ                      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - updateElo ‚îÇ  ‚îÇ - makeMove   ‚îÇ                      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - stats     ‚îÇ  ‚îÇ - stream     ‚îÇ                      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  Felel≈ëss√©g: J√°t√©k logika, ELO sz√°m√≠t√°s, valid√°l√°s, id≈ëkezel√©s  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ Firebase API calls, External APIs
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      DATA ACCESS LAYER                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ            Firebase SDK & External APIs                   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ Realtime   ‚îÇ  ‚îÇ Firestore  ‚îÇ  ‚îÇ    Storage        ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ Database   ‚îÇ  ‚îÇ            ‚îÇ  ‚îÇ                   ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ            ‚îÇ  ‚îÇ - set()    ‚îÇ  ‚îÇ - uploadBytes()   ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - ref()    ‚îÇ  ‚îÇ - get()    ‚îÇ  ‚îÇ - getDownloadURL()‚îÇ  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - onValue()‚îÇ  ‚îÇ - update() ‚îÇ  ‚îÇ                   ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - set()    ‚îÇ  ‚îÇ - query()  ‚îÇ  ‚îÇ                   ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - update() ‚îÇ  ‚îÇ            ‚îÇ  ‚îÇ                   ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                         ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Auth      ‚îÇ  ‚îÇ Lichess    ‚îÇ                         ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ            ‚îÇ  ‚îÇ  API       ‚îÇ                         ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - signIn() ‚îÇ  ‚îÇ            ‚îÇ                         ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - signOut()‚îÇ  ‚îÇ - fetch()  ‚îÇ                         ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ - onAuth() ‚îÇ  ‚îÇ - stream() ‚îÇ                         ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  Felel≈ëss√©g: Adatb√°zis m≈±veletek, API h√≠v√°sok, real-time sync   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ Network requests
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      EXTERNAL SYSTEMS LAYER                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Firebase Cloud ‚îÇ  ‚îÇ  Lichess.org    ‚îÇ               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                 ‚îÇ               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Realtime DB  ‚îÇ  ‚îÇ  - Board API    ‚îÇ               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Firestore    ‚îÇ  ‚îÇ  - Cloud Eval   ‚îÇ               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Auth         ‚îÇ  ‚îÇ  - AI Engine    ‚îÇ               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Storage      ‚îÇ  ‚îÇ                 ‚îÇ               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Functions    ‚îÇ  ‚îÇ                 ‚îÇ               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  Felel≈ëss√©g: Adatt√°rol√°s, authentik√°ci√≥, AI motor, cloud eval   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### 3.2 R√©tegek R√©szletes Le√≠r√°sa

#### 3.2.1 Presentation Layer (Prezent√°ci√≥s R√©teg)
**Felel≈ëss√©g**: Felhaszn√°l√≥i fel√ºlet, user interakci√≥k, routing

**Komponensek**:
- **Pages** (7 db): Home, Lobby, Game, MyGames, Leaderboard, Settings, Auth
- **Components** (18+ db): UI √©p√≠t≈ëelemek, modals, forms
- **Hooks** (1 db): useAuth (custom hook)

**Technol√≥gi√°k**:
- React 19.1.1
- React Router DOM 7.9.3
- Tailwind CSS 4.1.14
- Headless UI, Heroicons

**Kommunik√°ci√≥**:
- ‚¨áÔ∏è **Business Logic Layer**: Service met√≥dus h√≠v√°sok
- ‚¨ÜÔ∏è **Browser**: DOM events, user input

**P√©lda k√≥d**:
```typescript
// ChessGame.tsx (Container Component)
const handleMove = async (move: Move) => {
  await gameService.updateGameInDb(gameId, gameData, chessGame, fen, move);
};
```

**Design Patterns**:
- Presentational & Container Components
- Custom Hooks
- Composition Pattern

---

#### 3.2.2 Business Logic Layer (√úzleti Logika R√©teg)
**Felel≈ëss√©g**: J√°t√©k logika, sz√°m√≠t√°sok, valid√°l√°s, √ºzleti szab√°lyok

**Komponensek**:
- **gameService**: J√°t√©k m≈±veletek, ELO sz√°m√≠t√°s, j√°t√©k v√©ge detekci√≥
- **playerService**: J√°t√©kos kezel√©s, csatlakoz√°s, id≈ësz√°m√≠t√°s
- **aiGameService**: AI j√°t√©k orchestration (Lichess integr√°ci√≥)
- **userService**: Felhaszn√°l√≥i profil m≈±veletek
- **lichessService**: Lichess API wrapper

**Technol√≥gi√°k**:
- TypeScript 5.8.3
- Chess.js 1.4.0 (sakk logika)
- Firebase SDK (csak API h√≠v√°sok)

**Kommunik√°ci√≥**:
- ‚¨ÜÔ∏è **Presentation Layer**: Return values, callbacks
- ‚¨áÔ∏è **Data Access Layer**: Firebase SDK h√≠v√°sok, Lichess API

**P√©lda k√≥d**:
```typescript
// gameService.ts
class GameService {
  async updateGameInDb(gameId: string, gameData: Game, ...): Promise<void> {
    // Valid√°l√°s
    if (!this.isValidMove(move)) throw new Error("Invalid move");
    
    // Id≈ësz√°m√≠t√°s
    const newTimeLeft = this.calculateTimeLeft(gameData, move);
    
    // J√°t√©k v√©ge detekci√≥
    const winner = this.detectWinner(chessGame);
    
    // Adatb√°zis friss√≠t√©s (Data Access Layer)
    await update(ref(db, `games/${gameId}`), { fen, moves, timeLeft });
    
    // ELO friss√≠t√©s ha v√©ge
    if (winner) {
      await this.updateFirestoreOnGameEnd(gameId, gameData, winner);
    }
  }
}
```

**Design Patterns**:
- Singleton Pattern (service instances)
- Service Layer Pattern
- Strategy Pattern (game end logika)

---

#### 3.2.3 Data Access Layer (Adatel√©r√©si R√©teg)
**Felel≈ëss√©g**: Adatb√°zis m≈±veletek, API h√≠v√°sok, real-time synchronization

**Komponensek**:
- **Firebase Realtime Database**: J√°t√©k √°llapot (real-time sync)
- **Firestore**: Felhaszn√°l√≥i profilok, statisztik√°k
- **Firebase Storage**: Avatar k√©pek
- **Firebase Auth**: Authentik√°ci√≥
- **Lichess API**: HTTP fetch, EventSource streaming

**Technol√≥gi√°k**:
- Firebase SDK 12.3.0
- Native Fetch API
- EventSource API (Lichess streaming)

**Kommunik√°ci√≥**:
- ‚¨ÜÔ∏è **Business Logic Layer**: Adatok visszaad√°sa (Promise, callback)
- ‚¨áÔ∏è **External Systems Layer**: Network requests (HTTPS)

**P√©lda k√≥d**:
```typescript
// Firebase Realtime Database
import { ref, onValue, set, update } from "firebase/database";

// Olvas√°s (real-time listener)
const gameRef = ref(db, `games/${gameId}`);
onValue(gameRef, (snapshot) => {
  const data = snapshot.val();
  // Presentation Layer-nek tov√°bb√≠t√°s
});

// √çr√°s
await set(ref(db, `games/${gameId}`), gameData);
await update(ref(db, `games/${gameId}`), { status: "ended" });

// Firestore
import { doc, getDoc, setDoc, updateDoc } from "firebase/firestore";

// Olvas√°s
const userDoc = await getDoc(doc(firestore, "users", userId));
const userData = userDoc.data();

// √çr√°s
await setDoc(doc(firestore, "users", userId), userProfile);
await updateDoc(doc(firestore, "users", userId), { elo: newElo });

// Lichess API
const response = await fetch("https://lichess.org/api/board/game/stream/{gameId}", {
  headers: { Authorization: `Bearer ${token}` }
});
```

**Design Patterns**:
- Observer Pattern (Firebase listeners)
- Repository Pattern (üîÆ aj√°nlott, de nincs implement√°lva)

---

#### 3.2.4 External Systems Layer (K√ºls≈ë Rendszerek R√©teg)
**Felel≈ëss√©g**: Adatt√°rol√°s, authentik√°ci√≥, AI motor, felh≈ë szolg√°ltat√°sok

**Komponensek**:
- **Firebase Cloud**: 
  - Realtime Database (NoSQL, real-time)
  - Firestore (dokumentum DB)
  - Authentication (email, Google, anonymous)
  - Storage (blob storage)
  - Functions (serverless backend)
  - Hosting (static files)
  
- **Lichess.org**:
  - Board API (AI j√°t√©k)
  - Cloud Evaluation API (best move hint)
  - Stockfish AI Engine (1-8 difficulty)

**Kommunik√°ci√≥**:
- ‚¨ÜÔ∏è **Data Access Layer**: JSON responses, WebSocket/EventSource streams
- üåê **Internet**: HTTPS, WSS

**Biztons√°gi szab√°lyok**:
```javascript
// Firestore Rules
match /users/{userId} {
  allow read: if request.auth != null;
  allow write: if request.auth.uid == userId;
}

// Realtime Database Rules
{
  "games": {
    "$gameId": {
      ".read": "auth != null",
      ".write": "auth != null"
    }
  }
}
```

---

### 3.3 Adatfolyam a R√©tegeken Kereszt√ºl

#### 3.3.1 J√°t√©kos L√©p√©s (Move) Flow

```
USER ACTION (Presentation Layer)
    ‚îÇ
    ‚îÇ 1. Drag & Drop vagy Click-Click
    ‚ñº
ChessGameView.tsx (Presentation)
    ‚îÇ
    ‚îÇ 2. onPieceDrop callback
    ‚ñº
ChessGame.tsx (Presentation - Container)
    ‚îÇ
    ‚îÇ 3. Chess.js valid√°l√°s (local)
    ‚îÇ 4. gameService.updateGameInDb() h√≠v√°s
    ‚ñº
gameService.ts (Business Logic)
    ‚îÇ
    ‚îÇ 5. Id≈ësz√°m√≠t√°s
    ‚îÇ 6. Increment hozz√°ad√°s
    ‚îÇ 7. J√°t√©k v√©ge ellen≈ërz√©s
    ‚îÇ 8. ELO sz√°m√≠t√°s (ha v√©ge)
    ‚ñº
Firebase Realtime DB (Data Access)
    ‚îÇ
    ‚îÇ 9. update(ref(db, 'games/{gameId}'), {...})
    ‚ñº
Firebase Cloud (External System)
    ‚îÇ
    ‚îÇ 10. Adatb√°zis √≠r√°s
    ‚îÇ 11. WebSocket broadcast (real-time sync)
    ‚ñº
Firebase Realtime DB (Data Access)
    ‚îÇ
    ‚îÇ 12. onValue listener trigger
    ‚ñº
ChessGame.tsx (Presentation)
    ‚îÇ
    ‚îÇ 13. useState friss√≠t√©s
    ‚ñº
ChessGameView.tsx (Presentation)
    ‚îÇ
    ‚îÇ 14. Re-render (√∫j poz√≠ci√≥ megjelen√≠t√©s)
    ‚ñº
USER SEES UPDATE (Browser)
```

#### 3.3.2 Felhaszn√°l√≥ Bejelentkez√©s Flow

```
USER ACTION (Presentation Layer)
    ‚îÇ
    ‚îÇ 1. Email + jelsz√≥ be√≠r√°s
    ‚ñº
LoginForm.tsx (Presentation)
    ‚îÇ
    ‚îÇ 2. handleLogin() f√ºggv√©ny
    ‚îÇ 3. Firebase Auth signInWithEmailAndPassword()
    ‚ñº
Firebase Auth SDK (Data Access)
    ‚îÇ
    ‚îÇ 4. POST https://identitytoolkit.googleapis.com/...
    ‚ñº
Firebase Auth (External System)
    ‚îÇ
    ‚îÇ 5. Credentials ellen≈ërz√©s
    ‚îÇ 6. JWT token gener√°l√°s
    ‚îÇ 7. onAuthStateChanged trigger
    ‚ñº
Firebase Auth SDK (Data Access)
    ‚îÇ
    ‚îÇ 8. onAuthStateChanged callback
    ‚ñº
useAuth.ts (Presentation - Hook)
    ‚îÇ
    ‚îÇ 9. setCurrentUser(user)
    ‚îÇ 10. Firestore user profile bet√∂lt√©s
    ‚ñº
userService.ts (Business Logic)
    ‚îÇ
    ‚îÇ 11. getUserProfile(user)
    ‚ñº
Firestore SDK (Data Access)
    ‚îÇ
    ‚îÇ 12. getDoc(doc(firestore, 'users', userId))
    ‚ñº
Firestore (External System)
    ‚îÇ
    ‚îÇ 13. Dokumentum lek√©rdez√©s
    ‚îÇ 14. User data visszaad√°s (elo, wins, losses, draws)
    ‚ñº
useAuth.ts (Presentation)
    ‚îÇ
    ‚îÇ 15. Context/State friss√≠t√©s
    ‚ñº
Header.tsx (Presentation)
    ‚îÇ
    ‚îÇ 16. Avatar + n√©v megjelen√≠t√©s
    ‚ñº
USER SEES PROFILE (Browser)
```

#### 3.3.3 AI J√°t√©k L√©p√©s Flow

```
USER MAKES MOVE (Presentation Layer)
    ‚îÇ
    ‚îÇ 1. L√©p√©s a t√°bl√°n
    ‚ñº
ChessGame.tsx (Presentation)
    ‚îÇ
    ‚îÇ 2. gameService.updateGameInDb()
    ‚ñº
gameService.ts (Business Logic)
    ‚îÇ
    ‚îÇ 3. Firebase Realtime DB friss√≠t√©s
    ‚îÇ 4. AI j√°t√©k ellen≈ërz√©s (opponentType === "ai")
    ‚ñº
aiGameService.ts (Business Logic)
    ‚îÇ
    ‚îÇ 5. makeAIMove(lichessGameId, move)
    ‚ñº
lichessService.ts (Business Logic)
    ‚îÇ
    ‚îÇ 6. fetch POST /api/board/game/{gameId}/move/{move}
    ‚ñº
Lichess API (External System)
    ‚îÇ
    ‚îÇ 7. Stockfish AI move sz√°m√≠t√°s
    ‚îÇ 8. EventSource stream response
    ‚ñº
aiGameService.ts (Business Logic)
    ‚îÇ
    ‚îÇ 9. streamAIGameState() listener
    ‚îÇ 10. AI move parse
    ‚ñº
gameService.ts (Business Logic)
    ‚îÇ
    ‚îÇ 11. Firebase Realtime DB friss√≠t√©s (AI l√©p√©s)
    ‚ñº
Firebase Realtime DB (Data Access)
    ‚îÇ
    ‚îÇ 12. onValue listener trigger
    ‚ñº
ChessGame.tsx (Presentation)
    ‚îÇ
    ‚îÇ 13. AI l√©p√©s megjelen√≠t√©s
    ‚ñº
USER SEES AI MOVE (Browser)
```

---

### 3.4 Keresztr√©teg F√ºgg≈ës√©gek (Cross-Cutting Concerns)

#### 3.4.1 Authentication
- **Presentation Layer**: LoginForm, RegisterForm, useAuth hook
- **Data Access Layer**: Firebase Auth SDK
- **External System**: Firebase Authentication

**Minden r√©tegen √°tszalad**: Minden API h√≠v√°s ellen≈ërzi az auth state-et

---

#### 3.4.2 Error Handling
- **Presentation Layer**: Try-catch blokkok, error state
- **Business Logic Layer**: Custom Error objektumok
- **Data Access Layer**: Firebase error codes

‚ö†Ô∏è **Jelenleg hi√°nyos**: Nincs glob√°lis error boundary

---

#### 3.4.3 Logging
- ‚ùå **Jelenleg nincs implement√°lva**
- üîÆ **Javaslat**: Decorator Pattern minden r√©tegen

---

#### 3.4.4 Performance Monitoring
- ‚ùå **Jelenleg nincs implement√°lva**
- üîÆ **Javaslat**: Firebase Performance Monitoring SDK

---

### 3.5 Magas Szint≈± Architekt√∫ra (Eredeti Diagram)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      FRONTEND (React)                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Pages         ‚îÇ  Components     ‚îÇ  Services                ‚îÇ
‚îÇ  - Home        ‚îÇ  - ChessBoard   ‚îÇ  - gameService           ‚îÇ
‚îÇ  - Lobby       ‚îÇ  - Header       ‚îÇ  - playerService         ‚îÇ
‚îÇ  - Game        ‚îÇ  - PlayerInfo   ‚îÇ  - aiGameService         ‚îÇ
‚îÇ  - MyGames     ‚îÇ  - Chat         ‚îÇ  - userService           ‚îÇ
‚îÇ  - Leaderboard ‚îÇ  - Modals       ‚îÇ  - lichessService        ‚îÇ
‚îÇ  - Settings    ‚îÇ  - Auth Forms   ‚îÇ                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                ‚îÇ                ‚îÇ
         ‚ñº                ‚ñº                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Firebase      ‚îÇ ‚îÇ   Firebase  ‚îÇ ‚îÇ  Lichess API    ‚îÇ
‚îÇ   Auth          ‚îÇ ‚îÇ   Realtime  ‚îÇ ‚îÇ  (AI Games)     ‚îÇ
‚îÇ   (Users)       ‚îÇ ‚îÇ   Database  ‚îÇ ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ   (Games)   ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ   Firestore     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ   (Profiles,    ‚îÇ
‚îÇ   Stats)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Storage       ‚îÇ
‚îÇ   (Avatars)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2 Adatfolyam Architekt√∫ra

#### 3.2.1 J√°t√©k L√©trehoz√°s Flow
```
User Input (Lobby)
  ‚Üí CreateGameModal (time, increment, opponent type)
  ‚Üí gameService.createNewGame()
  ‚Üí Firebase Realtime DB: /games/{gameId}
  ‚Üí Navigate to /game/{gameId}
```

#### 3.2.2 J√°t√©k Csatlakoz√°s Flow
```
User joins game
  ‚Üí playerService.joinGame()
  ‚Üí Fetch user data from Firestore
  ‚Üí Update /games/{gameId}/players/{side}
  ‚Üí Real-time listener updates UI
```

#### 3.2.3 L√©p√©s Flow
```
User makes move
  ‚Üí Chess.js validation
  ‚Üí gameService.updateGameInDb()
  ‚Üí Update Firebase Realtime DB
  ‚Üí Time calculation & increment
  ‚Üí Check game end conditions
  ‚Üí updateFirestoreOnGameEnd() if needed
  ‚Üí Real-time sync to all clients
```

### 3.3 State Management
- **Local State**: React useState, useRef
- **Global State**: Firebase Realtime listeners (real-time sync)
- **Auth State**: Firebase onAuthStateChanged
- **Custom Hooks**: 
  - `useAuth()` - Authentication state

---

## 5. Adat- √©s Adatb√°zisterv

### 5.1 Adatb√°zis Technol√≥gia

A ChessApp **k√©t Firebase adatb√°zis technol√≥gi√°t** haszn√°l p√°rhuzamosan:

1. **Firebase Realtime Database** (NoSQL, JSON-alap√∫)
   - **C√©l**: J√°t√©k √°llapot t√°rol√°s, real-time szinkroniz√°ci√≥
   - **El≈ëny**: WebSocket alap√∫, < 100ms latency, automatikus offline sync
   - **H√°tr√°ny**: Korl√°tozott query k√©pess√©g, nincs native indexel√©s

2. **Cloud Firestore** (NoSQL, dokumentum-alap√∫)
   - **C√©l**: Felhaszn√°l√≥i profilok, statisztik√°k, perzisztens adatok
   - **El≈ëny**: Komplex query-k, indexel√©s, auto-scaling
   - **H√°tr√°ny**: Magasabb latency (~200-500ms), dr√°g√°bb

---

### 5.2 Adatb√°zis Szerkezet √Åttekint√©s

```
Firebase Realtime Database:
‚îî‚îÄ‚îÄ /games/{gameId}          [J√°t√©k √°llapot - real-time]

Cloud Firestore:
‚îú‚îÄ‚îÄ /users/{userId}          [Felhaszn√°l√≥i profilok]
‚îî‚îÄ‚îÄ /chats/{gameId}          [Chat √ºzenetek - tervezett]
    ‚îî‚îÄ‚îÄ /messages/{msgId}

Firebase Storage:
‚îî‚îÄ‚îÄ /avatars/{userId}        [Avatar k√©pek]
```

---

### 5.3 Entit√°s-Rel√°ci√≥s Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       1      N ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       User          ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ        Game         ‚îÇ
‚îÇ  (Firestore)        ‚îÇ                 ‚îÇ  (Realtime DB)      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                 ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ uid (PK)          ‚îÇ                 ‚îÇ ‚Ä¢ gameId (PK)       ‚îÇ
‚îÇ ‚Ä¢ email             ‚îÇ                 ‚îÇ ‚Ä¢ fen               ‚îÇ
‚îÇ ‚Ä¢ displayName       ‚îÇ                 ‚îÇ ‚Ä¢ moves[]           ‚îÇ
‚îÇ ‚Ä¢ photoURL          ‚îÇ                 ‚îÇ ‚Ä¢ players           ‚îÇ
‚îÇ ‚Ä¢ elo               ‚îÇ                 ‚îÇ   - white (FK‚ÜíUser) ‚îÇ
‚îÇ ‚Ä¢ wins              ‚îÇ                 ‚îÇ   - black (FK‚ÜíUser) ‚îÇ
‚îÇ ‚Ä¢ losses            ‚îÇ                 ‚îÇ ‚Ä¢ status            ‚îÇ
‚îÇ ‚Ä¢ draws             ‚îÇ                 ‚îÇ ‚Ä¢ winner            ‚îÇ
‚îÇ ‚Ä¢ createdAt         ‚îÇ                 ‚îÇ ‚Ä¢ timeLeft          ‚îÇ
‚îÇ ‚Ä¢ lastLogin         ‚îÇ                 ‚îÇ ‚Ä¢ startingElo       ‚îÇ
‚îÇ ‚Ä¢ settings          ‚îÇ                 ‚îÇ ‚Ä¢ finalElo          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ ‚Ä¢ lichessGameId     ‚îÇ
                                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       N      1 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Chat Message      ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ        Game         ‚îÇ
‚îÇ  (Firestore)        ‚îÇ                 ‚îÇ                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ ‚Ä¢ messageId (PK)    ‚îÇ
‚îÇ ‚Ä¢ gameId (FK)       ‚îÇ
‚îÇ ‚Ä¢ userId (FK‚ÜíUser)  ‚îÇ
‚îÇ ‚Ä¢ userName          ‚îÇ
‚îÇ ‚Ä¢ message           ‚îÇ
‚îÇ ‚Ä¢ timestamp         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       N      1 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Avatar Image     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ        User         ‚îÇ
‚îÇ  (Storage)          ‚îÇ                 ‚îÇ                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ ‚Ä¢ path (PK)         ‚îÇ
‚îÇ ‚Ä¢ userId (FK)       ‚îÇ
‚îÇ ‚Ä¢ contentType       ‚îÇ
‚îÇ ‚Ä¢ size              ‚îÇ
‚îÇ ‚Ä¢ uploadedAt        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Kapcsolatok**:
- User ‚Üî Game: **N:M** (egy user t√∂bb j√°t√©kban, egy j√°t√©kban max 2 user)
- Game ‚Üí Chat: **1:N** (egy j√°t√©khoz t√∂bb chat √ºzenet)
- User ‚Üí Avatar: **1:1** (egy userhez egy avatar)

---

### 5.4 Firebase Realtime Database (J√°t√©kok)

**Gy√∂k√©r strukt√∫ra**:
```
/games/
  ‚îú‚îÄ‚îÄ {gameId1}/
  ‚îú‚îÄ‚îÄ {gameId2}/
  ‚îî‚îÄ‚îÄ {gameId3}/
```

**Indexel√©s**: Nincs nat√≠v index (client-side sz≈±r√©s)

**Optimaliz√°ci√≥**:
- ‚úÖ Shallow query: `.orderByChild('status')`
- ‚úÖ Denormaliz√°ci√≥ (player adatok duplik√°lva)
- ‚ö†Ô∏è Hi√°nyoss√°g: Nincs TTL (befejezett j√°t√©kok v√©gtelen ideig maradnak)

---

### 5.5 Cloud Firestore (Felhaszn√°l√≥k)

**Collection strukt√∫ra**:
```
/users/
  ‚îú‚îÄ‚îÄ {userId1}/
  ‚îú‚îÄ‚îÄ {userId2}/
  ‚îî‚îÄ‚îÄ {userId3}/
```

**Indexek**:
- ‚úÖ Primary Index: `uid` (automatikus)
- ‚úÖ Composite Index: `elo DESC` (leaderboard query)
- üîÆ Tervezett: `email` (email keres√©s)

**Query p√©ld√°k**:
```typescript
// Leaderboard (top 100)
query(collection(firestore, "users"), 
      orderBy("elo", "desc"), 
      limit(100))

// User lookup
doc(firestore, "users", userId)
```

---

### 5.6 Firebase Storage (Avatar-ok)

**Folder strukt√∫ra**:
```
/avatars/
  ‚îú‚îÄ‚îÄ {userId1}/profile.jpg
  ‚îú‚îÄ‚îÄ {userId2}/profile.png
  ‚îî‚îÄ‚îÄ {userId3}/profile.webp
```

**Metadata**:
- Content-Type: image/jpeg, image/png, image/webp
- Max size: 5 MB
- Allowed: Authenticated users only

---

## 6. Adatb√°zis Entit√°sok (Objektummodell)

### 6.1 Game Entit√°s (Realtime Database)

**T√°bla**: `/games/{gameId}`

**T√≠pus**: JSON dokumentum

**Attrib√∫tumok**:
| Mez≈ë | T√≠pus | Le√≠r√°s | K√∂telez≈ë | Alap√©rtelmezett |
|------|-------|--------|----------|-----------------|
| `gameId` | string | Egyedi azonos√≠t√≥ (8 karakter) | ‚úÖ | nanoid() |
| `fen` | string | Aktu√°lis t√°bla poz√≠ci√≥ (FEN) | ‚úÖ | Starting position |
| `moves` | Move[] | L√©p√©st√∂rt√©net array | ‚úÖ | [] |
| `lastMove` | {from, to, san} | Utols√≥ l√©p√©s | ‚ùå | null |
| `players` | {white, black} | J√°t√©kosok objektum | ‚úÖ | {white: null, black: null} |
| `turn` | "white" \| "black" | Aktu√°lis l√©p≈ë | ‚úÖ | "white" |
| `status` | "waiting" \| "ongoing" \| "ended" | J√°t√©k √°llapot | ‚úÖ | "waiting" |
| `winner` | "white" \| "black" \| "draw" \| null | Gy≈ëztes | ‚ùå | null |
| `winReason` | winReason | Gy≈ëzelem oka (9 t√≠pus) | ‚ùå | null |
| `timeLeft` | {white: number, black: number} | H√°tralev≈ë id≈ë (ms) | ‚úÖ | timeControl * 60000 |
| `timeControl` | number | Id≈ëkorl√°t (perc) | ‚úÖ | 5 |
| `increment` | number | Increment (m√°sodperc) | ‚úÖ | 0 |
| `opponentType` | "human" \| "ai" | Ellenf√©l t√≠pus | ‚úÖ | "human" |
| `createdAt` | number | L√©trehoz√°s timestamp | ‚úÖ | Date.now() |
| `updatedAt` | number | Utols√≥ friss√≠t√©s timestamp | ‚úÖ | Date.now() |
| `started` | boolean | Elindult-e a j√°t√©k | ‚úÖ | false |
| `startingElo` | {white: number, black: number} | Kezd≈ë ELO | ‚ùå | null |
| `finalElo` | {white: number, black: number} | V√©gs≈ë ELO | ‚ùå | null |
| `drawOfferedBy` | string \| null | D√∂ntetlen aj√°nl√≥ user UID | ‚ùå | null |
| `lichessGameId` | string \| null | Lichess j√°t√©k ID (AI j√°t√©kn√°l) | ‚ùå | null |

**Rel√°ci√≥k**:
- `players.white.uid` ‚Üí User (Firestore)
- `players.black.uid` ‚Üí User (Firestore)

---

### 6.2 User Entit√°s (Firestore)

**Collection**: `/users/{userId}`

**T√≠pus**: Firestore dokumentum

**Attrib√∫tumok**:
| Mez≈ë | T√≠pus | Le√≠r√°s | K√∂telez≈ë | Alap√©rtelmezett |
|------|-------|--------|----------|-----------------|
| `uid` | string | Firebase Auth UID (PK) | ‚úÖ | Auth generated |
| `email` | string | Email c√≠m | ‚úÖ | - |
| `displayName` | string | Megjelen√≠tett n√©v | ‚úÖ | Email prefix |
| `photoURL` | string | Avatar URL vagy emoji:üë§ | ‚úÖ | "emoji:üë§" |
| `elo` | number | ELO rangsor | ‚úÖ | 1200 |
| `wins` | number | Gy≈ëzelmek sz√°ma | ‚úÖ | 0 |
| `losses` | number | Veres√©gek sz√°ma | ‚úÖ | 0 |
| `draws` | number | D√∂ntetlenek sz√°ma | ‚úÖ | 0 |
| `createdAt` | Timestamp | Regisztr√°ci√≥ d√°tum | ‚úÖ | serverTimestamp() |
| `lastLogin` | Timestamp | Utols√≥ bejelentkez√©s | ‚úÖ | serverTimestamp() |
| `settings` | object | Felhaszn√°l√≥i be√°ll√≠t√°sok | ‚ùå | {} |

**settings Object**:
```typescript
{
  soundEnabled: boolean;
  notificationsEnabled: boolean;
  theme: string;
}
```

**Indexek**:
- Primary: `uid` (automatikus)
- Secondary: `elo` (descending)

---

### 6.3 Player Entit√°s (Denormaliz√°lt - Game-ben)

**T√≠pus**: Nested object (Game.players.white / Game.players.black)

**Attrib√∫tumok**:
| Mez≈ë | T√≠pus | Le√≠r√°s | K√∂telez≈ë |
|------|-------|--------|----------|
| `uid` | string | User azonos√≠t√≥ | ‚úÖ |
| `name` | string | N√©v (√∫j j√°t√©kokn√°l) | ‚ùå |
| `displayName` | string | Display name | ‚ùå |
| `email` | string | Email c√≠m | ‚ùå |
| `elo` | number | Aktu√°lis ELO | ‚úÖ |
| `wins` | number | Gy≈ëzelmek | ‚úÖ |
| `losses` | number | Veres√©gek | ‚úÖ |
| `draws` | number | D√∂ntetlenek | ‚úÖ |

**Megjegyz√©s**: Denormaliz√°lt adatok (duplik√°lva Firestore User-b≈ël a gyorsabb lek√©rdez√©s √©rdek√©ben)

---

### 6.4 Move Entit√°s (Game.moves array)

**T√≠pus**: Array item (Game.moves[])

**Attrib√∫tumok**:
| Mez≈ë | T√≠pus | Le√≠r√°s | P√©lda |
|------|-------|--------|-------|
| `from` | Square | Kiindul√°si mez≈ë | "e2" |
| `to` | Square | C√©lmez≈ë | "e4" |
| `san` | string | Standard Algebraic Notation | "e4" |
| `fen` | string | Poz√≠ci√≥ l√©p√©s ut√°n | "rnbqkbnr/..." |
| `updatedAt` | number | L√©p√©s timestamp | 1634567890123 |
| `moveNumber` | number | L√©p√©s sorsz√°m | 1 |
| `timeLeft` | {white: number, black: number} | Id≈ë l√©p√©s ut√°n | {white: 300000, black: 295000} |

---

### 6.5 ChatMessage Entit√°s (Firestore - Tervezett)

**Collection**: `/chats/{gameId}/messages/{messageId}`

**T√≠pus**: Firestore sub-collection

**Attrib√∫tumok**:
| Mez≈ë | T√≠pus | Le√≠r√°s | K√∂telez≈ë |
|------|-------|--------|----------|
| `messageId` | string | Egyedi azonos√≠t√≥ (PK) | ‚úÖ |
| `gameId` | string | J√°t√©k ID (FK) | ‚úÖ |
| `userId` | string | K√ºld≈ë user ID | ‚úÖ |
| `userName` | string | K√ºld≈ë n√©v | ‚úÖ |
| `message` | string | √úzenet sz√∂veg | ‚úÖ |
| `timestamp` | Timestamp | K√ºld√©s id≈ë | ‚úÖ |

**St√°tusz**: üîÆ Tervezett (backend nincs implement√°lva)

---

## 7. Adatb√°zis Strukt√∫ra (R√©szletes JSON)

#### 4.1.1 Games Collection
```json
/games/{gameId}/
{
  "fen": "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",
  "moves": [
    {
      "from": "e2",
      "to": "e4",
      "san": "e4",
      "fen": "...",
      "updatedAt": 1234567890,
      "moveNumber": 1,
      "timeLeft": { "white": 300000, "black": 300000 }
    }
  ],
  "lastMove": {
    "from": "e2",
    "to": "e4",
    "san": "e4"
  },
  "players": {
    "white": {
      "uid": "user123",
      "name": "Player Name",
      "displayName": "Player Name",
      "email": "player@example.com",
      "elo": 1200,
      "wins": 5,
      "losses": 3,
      "draws": 1
    },
    "black": { /* same structure */ }
  },
  "turn": "white",
  "status": "waiting" | "ongoing" | "ended",
  "winner": "white" | "black" | "draw" | null,
  "winReason": "checkmate" | "timeout" | "resignation" | ...,
  "timeLeft": { "white": 300000, "black": 300000 },
  "timeControl": 5,      // percben
  "increment": 0,        // m√°sodpercben
  "opponentType": "human" | "ai",
  "createdAt": 1234567890,
  "updatedAt": 1234567890,
  "started": false,
  "startingElo": { "white": 1200, "black": 1200 },
  "finalElo": { "white": 1215, "black": 1185 },
  "drawOfferedBy": "user123" | null,
  "lichessGameId": "abc123xyz" // Ha AI j√°t√©k
}
```

### 4.2 Firestore Database

#### 4.2.1 Users Collection
```typescript
/users/{userId}/
{
  uid: string;
  email: string;
  displayName: string;
  photoURL: string;        // vagy "emoji:üë§" form√°tum
  elo: number;             // 1200 alap√©rtelmezett
  wins: number;
  losses: number;
  draws: number;
  createdAt: Timestamp;
  lastLogin: Timestamp;
  settings: {
    soundEnabled: boolean;
    notificationsEnabled: boolean;
    theme: string;
    // tov√°bbi be√°ll√≠t√°sok
  }
}
```

#### 4.2.2 Chat Messages (opcion√°lis - jelenleg nincs implement√°lva)
```typescript
/chats/{gameId}/messages/{messageId}/
{
  userId: string;
  userName: string;
  message: string;
  timestamp: Timestamp;
}
```

### 4.3 Firebase Storage
```
/avatars/{userId}/
  - profile.jpg
  - profile.png
```

---

## 7. Funkcion√°lis K√∂vetelm√©nyek

### 5.1 Authentik√°ci√≥ & Felhaszn√°l√≥ Kezel√©s

#### 5.1.1 Bejelentkez√©si M√≥dok
- ‚úÖ **Email/Password**: Hagyom√°nyos regisztr√°ci√≥ √©s bejelentkez√©s
- ‚úÖ **Google OAuth**: Azonnali bejelentkez√©s Google fi√≥kkal
- ‚úÖ **Guest/Anonymous**: Vend√©g bel√©p√©s regisztr√°ci√≥ n√©lk√ºl
- ‚ùå **Facebook OAuth**: El≈ëk√©sz√≠tve, de nem haszn√°lt

#### 5.1.2 Felhaszn√°l√≥i Profil
- ‚úÖ Avatar felt√∂lt√©s (Storage)
- ‚úÖ Avatar emoji kiv√°laszt√°s (el≈ëre defini√°lt emoji-k)
- ‚úÖ N√©v m√≥dos√≠t√°s
- ‚úÖ Jelsz√≥ v√°ltoztat√°s
- ‚úÖ ELO, gy≈ëzelmek, veres√©gek, d√∂ntetlenek megjelen√≠t√©s
- ‚úÖ Be√°ll√≠t√°sok (hang, √©rtes√≠t√©sek, t√©ma)

#### 5.1.3 Guest Felhaszn√°l√≥k
- Anonymous auth Firebase-ben
- UID: "guest_" prefixszel
- Korl√°tozott funkci√≥k (ELO nem ment≈ëdik Firestore-ba)

### 5.2 J√°t√©k Funkci√≥k

#### 5.2.1 J√°t√©k L√©trehoz√°s
- ‚úÖ Id≈ëkorl√°t v√°laszt√°s (1, 3, 5, 10, 15, 30 perc)
- ‚úÖ Increment v√°laszt√°s (0-30 m√°sodperc)
- ‚úÖ Ellenf√©l t√≠pus: Human vagy AI
- ‚úÖ AI neh√©zs√©g v√°laszt√°s (1-8 szint)
- ‚úÖ Automatikus j√°t√©k ID gener√°l√°s

#### 5.2.2 J√°t√©k Menete
- ‚úÖ Val√≥s idej≈± szinkroniz√°ci√≥ (Firebase Realtime DB)
- ‚úÖ Sakk√≥ra (Fischer √≥ra increment-tel)
- ‚úÖ L√©p√©s valid√°l√°s (Chess.js)
- ‚úÖ L√©p√©st√∂rt√©net megjelen√≠t√©s
- ‚úÖ T√∂rt√©net visszan√©z√©se (freeze board)
- ‚úÖ Kiemelt n√©gyzetek (utols√≥ l√©p√©s, lehets√©ges l√©p√©sek)
- ‚úÖ Drag & Drop b√°bu mozgat√°s
- ‚úÖ Click-click b√°bu mozgat√°s
- ‚úÖ Automatic queen promotion
- ‚úÖ N√©z≈ë m√≥d (spectator)

#### 5.2.3 J√°t√©k V√©ge Felt√©telek
- ‚úÖ **Matt** (checkmate)
- ‚úÖ **Id≈ët√∫ll√©p√©s** (timeout)
- ‚úÖ **Patt** (stalemate)
- ‚úÖ **H√°romszori ism√©tl√©s** (threefold repetition)
- ‚úÖ **Anyaghi√°ny** (insufficient material)
- ‚úÖ **50 l√©p√©s szab√°ly** (draw)
- ‚úÖ **Felad√°s** (resignation)
- ‚úÖ **D√∂ntetlen egyezs√©g** (agreement)
- ‚úÖ **Megszak√≠t√°s** (aborted - 0-1 l√©p√©s ut√°n, ELO v√°ltoz√°s n√©lk√ºl)

#### 5.2.4 J√°t√©k K√∂zben Akci√≥k
- ‚úÖ D√∂ntetlen aj√°nl√°s (Draw Offer)
- ‚úÖ D√∂ntetlen elfogad√°s/elutas√≠t√°s
- ‚úÖ Felad√°s (Surrender) - meger≈ës√≠t≈ë modal-lal
- ‚úÖ Megszak√≠t√°s (Abort) - csak 0-1 l√©p√©s ut√°n

#### 5.2.5 ELO Rendszer
- ‚úÖ **K-faktor**: 32
- ‚úÖ **Kezd≈ë ELO**: 1200
- ‚úÖ **Sz√°m√≠t√°s**: Standard ELO formula
  ```
  Expected = 1 / (1 + 10^((opponent_elo - player_elo) / 400))
  New ELO = Old ELO + K * (Actual - Expected)
  ```
- ‚úÖ Gy≈ëzelem: +ELO
- ‚úÖ Veres√©g: -ELO
- ‚úÖ D√∂ntetlen: ¬±ELO (v√°rhat√≥ eredm√©nyt≈ël f√ºgg)
- ‚úÖ Megszak√≠t√°s: Nincs ELO v√°ltoz√°s
- ‚úÖ Firestore friss√≠t√©s j√°t√©k v√©g√©n

### 5.3 AI Ellenf√©l (Lichess Integr√°ci√≥)

#### 5.3.1 Lichess Board API
- ‚úÖ Token alap√∫ authentik√°ci√≥
- ‚úÖ AI j√°t√©k challenge (difficulty 1-8)
- ‚úÖ Sz√≠n kiv√°laszt√°s (white, black, random)
- ‚úÖ Id≈ëkorl√°t szinkroniz√°l√°s
- ‚úÖ Real-time game state streaming
- ‚úÖ Move submission (UCI format)

#### 5.3.2 AI Szolg√°ltat√°sok
- ‚úÖ `aiGameService.ts`:
  - `startAIGame()` - AI challenge
  - `streamAIGameState()` - Stream Lichess game events
  - `makeAIMove()` - L√©p√©s k√ºld√©s Lichess-re
  - `getHint()` - Cloud evaluation API (best move hint)
  - `cleanupGame()` - Cleanup Lichess game

#### 5.3.3 Lichess Cloud Evaluation
- ‚úÖ Ingyenes, token n√©lk√ºl haszn√°lhat√≥
- ‚úÖ Best move javaslat
- ‚úÖ Evaluation √©rt√©k (centipawn)
- ‚ùå Jelenleg nincs UI integr√°ci√≥

### 5.4 Lobby & J√°t√©k Keres√©s

#### 5.4.1 Lobby Funkci√≥k
- ‚úÖ Akt√≠v j√°t√©kok list√°z√°sa (status: "waiting" vagy "ongoing")
- ‚úÖ J√°t√©k r√©szletek (id≈ëkorl√°t, j√°t√©kosok, ELO)
- ‚úÖ Join button (ha van szabad hely)
- ‚úÖ Spectate button (ha tele van)
- ‚úÖ Val√≥s idej≈± friss√≠t√©s (Firebase listener)
- ‚úÖ J√°t√©kos profil modal (kattinthat√≥ nevek)

#### 5.4.2 J√°t√©k Sz≈±r√©s
- ‚ùå Jelenleg nincs sz≈±r√©s
- üîÆ Tervezett: Id≈ëkorl√°t szerinti sz≈±r√©s, ELO range, AI/Human

### 5.5 J√°t√©kt√∂rt√©net (My Games)

#### 5.5.1 Befejezett J√°t√©kok
- ‚úÖ Csak a felhaszn√°l√≥ saj√°t befejezett j√°t√©kai
- ‚úÖ Sorrendez√©s: Legfrissebb el≈ël
- ‚úÖ Megjelen√≠tett adatok:
  - Game ID (utols√≥ 6 karakter)
  - J√°t√©kosok nevei √©s ELO-ja
  - Gy≈ëztes/vesztes/d√∂ntetlen kiemel√©s
  - ELO v√°ltoz√°s (+/-)
  - Id≈ëb√©lyeg (relative time: "2h ago")
- ‚úÖ Kattinthat√≥ - replay m√≥d

#### 5.5.2 Replay M√≥d
- ‚úÖ Visszan√©zhet≈ëk a befejezett j√°t√©kok
- ‚úÖ L√©p√©st√∂rt√©net navig√°ci√≥
- ‚úÖ Freeze board poz√≠ci√≥
- ‚úÖ "Go to latest" gomb

### 5.6 Leaderboard (Rangsor)

#### 5.6.1 Top J√°t√©kosok
- ‚úÖ Top 100 j√°t√©kos ELO szerint
- ‚úÖ Megjelen√≠tett adatok:
  - Rank (helyez√©s)
  - Avatar
  - N√©v
  - ELO
  - Gy≈ëzelmek / Veres√©gek
  - Win rate %
- ‚úÖ Expand/collapse toggle

#### 5.6.2 Friss√≠t√©s
- ‚úÖ Firestore query (orderBy elo, limit 100)
- ‚ùå Nincs val√≥s idej≈± friss√≠t√©s (csak oldal bet√∂lt√©skor)

### 5.7 Chat Rendszer

#### 5.7.1 J√°t√©k K√∂zben Chat
- ‚úÖ ChatBox komponens (ChessGameView-ban)
- ‚úÖ Val√≥s idej≈± √ºzenetek
- ‚ùå **Jelenleg nem implement√°lt backend**
- üîÆ Tervezett: Firestore alap√∫ chat

### 5.8 Be√°ll√≠t√°sok

#### 5.8.1 Profil Be√°ll√≠t√°sok
- ‚úÖ Avatar m√≥dos√≠t√°s (upload vagy emoji)
- ‚úÖ N√©v m√≥dos√≠t√°s
- ‚úÖ Jelsz√≥ v√°ltoztat√°s
- ‚úÖ Statisztik√°k megjelen√≠t√©s

#### 5.8.2 Alkalmaz√°s Be√°ll√≠t√°sok
- ‚úÖ Hang be/ki
- ‚úÖ √ârtes√≠t√©sek be/ki
- ‚úÖ T√©ma v√°laszt√°s (UI van, de nincs dark mode implement√°lva)
- ‚ùå Billing, Friends, Security, Notifications tabok √ºresek

---

## 8. Komponensek

### 6.1 Oldal Komponensek (Pages)

#### 6.1.1 Home (`home.tsx`)
**C√©l**: F≈ëoldal, CTA gombok, funkci√≥k bemutat√°sa

**Funkci√≥k**:
- Hero section anim√°ci√≥kkal
- Quick Play gomb (CreateGameModal megnyit√°sa)
- Funkci√≥k showcase (AI j√°t√©k, ELO rendszer, stb.)
- "Join the Chess Revolution" CTA

**Props**: Nincs

**State**:
- `showCreateGameModal` - Modal l√°that√≥s√°g

**Routing**: `/`

---

#### 6.1.2 Lobby (`lobby.tsx`)
**C√©l**: Akt√≠v j√°t√©kok b√∂ng√©sz√©se, csatlakoz√°s

**Funkci√≥k**:
- Akt√≠v j√°t√©kok list√°z√°sa
- Sz≈±r√©s: status !== "ended"
- Join / Spectate gombok
- Create Game gomb
- Player profile modal

**Props**: Nincs

**State**:
- `games` - J√°t√©kok lista
- `currentUser` - Bejelentkezett user
- `loading` - Bet√∂lt√©s state
- `profileDropdown` - Profil modal state
- `showCreateGameModal` - Create modal l√°that√≥s√°g

**Firebase Listeners**:
- `ref(db, "games")` - Val√≥s idej≈± j√°t√©kok
- `onAuthStateChanged` - User state

**Routing**: `/lobby`

---

#### 6.1.3 ChessGame (`ChessGame.tsx`)
**C√©l**: F≈ë j√°t√©k logika √©s √°llapot kezel√©s

**Funkci√≥k**:
- Chess.js instance kezel√©se
- Firebase Realtime sync
- J√°t√©kos csatlakoz√°s automatiz√°l√°s
- L√©p√©s kezel√©s √©s valid√°l√°s
- Id≈ëkezel√©s
- Game end detekci√≥
- D√∂ntetlen aj√°nl√°s/elfogad√°s/elutas√≠t√°s
- Felad√°s/megszak√≠t√°s
- Service layer integr√°ci√≥

**Props**: Nincs (URL param√©ter: `gameId`)

**State**:
- `chessPosition` - Aktu√°lis FEN
- `moveFrom` - Kiv√°lasztott b√°bu
- `optionSquares` - Lehets√©ges l√©p√©sek highlightok
- `lastMoveSquares` - Utols√≥ l√©p√©s highlight
- `moveHistory` - L√©p√©st√∂rt√©net
- `gameData` - Firebase game object
- `currentUser` - User
- `viewingHistoryIndex` - T√∂rt√©net navig√°ci√≥
- `timeLeft` - H√°tralev≈ë id≈ë
- `showEndModal`, `showSurrenderConfirm`, `showDrawOfferModal` - Modal states
- `eloChanges` - ELO v√°ltoz√°sok

**Firebase Listeners**:
- `ref(db, 'games/${gameId}')` - J√°t√©k state
- `onAuthStateChanged` - User state

**Services Used**:
- `gameService.createNewGame()`
- `gameService.updateGameInDb()`
- `gameService.updateFirestoreOnGameEnd()`
- `gameService.saveStartingElo()`
- `playerService.joinGame()`
- `playerService.getRemainingTime()`
- `playerService.getPlayerSide()`

**Routing**: `/game/:gameId`

---

#### 6.1.4 ChessGameView (`ChessGameView.tsx`)
**C√©l**: J√°t√©k UI renderel√©s (prezent√°ci√≥s komponens)

**Funkci√≥k**:
- Sakkt√°bla renderel√©s (react-chessboard)
- PlayerInfo komponensek (top & bottom)
- ChessClock komponensek
- MoveHistory komponens
- ChatBox komponens
- Action buttons (surrender, draw, abort)

**Props**:
```typescript
{
  chessPosition: string;
  optionSquares: Record<string, CSSProperties>;
  lastMoveSquares: { from: string; to: string } | null;
  players: { white?: Player; black?: Player } | null;
  currentUser: User | null;
  currentTurn: "white" | "black";
  moveHistory: MoveHistoryType[];
  viewingHistoryIndex: number | null;
  timeLeft: { white: number; black: number };
  gameStatus?: string;
  startingElo?: { white: number; black: number };
  finalElo?: { white: number; black: number };
  eloChanges?: { whiteChange: number; blackChange: number } | null;
  gameId?: string;
  onSquareClick: (args: SquareHandlerArgs) => void;
  onPieceDrop: (args: PieceDropHandlerArgs) => boolean;
  onViewMove: (index: number) => void;
  onGoToLatest: () => void;
  onSurrender: () => void;
  onOfferDraw?: () => void;
  onAbort?: () => void;
  onTimeExpired?: (side: "white" | "black") => void;
}
```

**Logika**:
- Board orientation (feh√©r alul, ha feh√©r j√°t√©kos)
- Top/bottom player meghat√°roz√°s
- ELO sz√°m√≠t√°sok (starting, current, changes)

**Routing**: Nincs (child component)

---

#### 6.1.5 MyGames (`mygames.tsx`)
**C√©l**: Felhaszn√°l√≥ befejezett j√°t√©kainak list√°z√°sa

**Funkci√≥k**:
- Saj√°t befejezett j√°t√©kok sz≈±r√©se
- Sorrendez√©s: updatedAt desc
- Game card-ok megjelen√≠t√©se
- Player profile modal
- Relative time ("2h ago")
- Win/Loss/Draw badge-ek
- ELO v√°ltoz√°s megjelen√≠t√©s

**Props**: Nincs

**State**:
- `games` - Befejezett j√°t√©kok
- `currentUser` - User
- `userLoading`, `gamesLoading` - Loading states
- `profileDropdown` - Profile modal state

**Firebase Listeners**:
- `ref(db, "games")` - √ñsszes j√°t√©k (sz≈±r√©s client-side)
- `onAuthStateChanged` - User state

**Routing**: `/mygames`

---

#### 6.1.6 Leaderboard (`leaderboard.tsx`)
**C√©l**: Top j√°t√©kosok rangsor megjelen√≠t√©se

**Funkci√≥k**:
- Top 100 j√°t√©kos lek√©rdez√©se
- ELO szerinti sorrendez√©s
- Win rate sz√°m√≠t√°s
- Expand/collapse toggle
- Avatar megjelen√≠t√©s

**Props**: Nincs

**State**:
- `players` - Top 100 j√°t√©kos
- `loading` - Bet√∂lt√©s state
- `showAll` - Teljes lista toggle

**Firebase Query**:
```typescript
query(
  collection(firestore, "users"),
  orderBy("elo", "desc"),
  limit(100)
)
```

**Routing**: `/leaderboard`

---

#### 6.1.7 Settings (`settings.tsx`)
**C√©l**: Felhaszn√°l√≥i be√°ll√≠t√°sok kezel√©se

**Funkci√≥k**:
- Sidebar navig√°ci√≥ (6 tab)
- Csak "Profile" tab implement√°lt (GeneralSettings)
- T√∂bbi tab placeholder

**Props**: Nincs

**State**:
- `activeTab` - Akt√≠v tab

**Child Components**:
- `GeneralSettings` - Profil be√°ll√≠t√°sok

**Routing**: `/profile`

---

### 6.2 UI Komponensek (Components)

#### 6.2.1 Header (`header.tsx`)
**Funkci√≥k**:
- Navig√°ci√≥s men√º
- User avatar dropdown
- Logout gomb
- Mobile hamburger menu
- Sticky header

**Firebase Listeners**:
- `onAuthStateChanged` - User & avatar bet√∂lt√©s

---

#### 6.2.2 Layout (`Layout.tsx`)
**Funkci√≥k**:
- Wrapper component
- Header be√°gyaz√°s
- Children renderel√©s

---

#### 6.2.3 LoginForm (`LoginForm.tsx`)
**Funkci√≥k**:
- Email/password login
- Google OAuth
- Guest login
- Anim√°lt h√°tt√©r
- Error handling

---

#### 6.2.4 RegisterForm (`RegisterForm.tsx`)
**Funkci√≥k**:
- Email/password regisztr√°ci√≥
- User profil l√©trehoz√°s Firestore-ban
- Error handling

---

#### 6.2.5 PlayerInfo (`PlayerInfo.tsx`)
**Funkci√≥k**:
- J√°t√©kos n√©v, avatar, ELO megjelen√≠t√©s
- Kattinthat√≥ - PlayerProfileModal
- Guest badge
- ELO v√°ltoz√°s megjelen√≠t√©s (+/-)
- Poz√≠ci√≥: top vagy bottom

**Props**:
```typescript
{
  color: "white" | "black";
  player: Player | null;
  position?: "top" | "bottom";
  startingElo?: number;
  currentElo?: number;
  eloChange?: number;
}
```

---

#### 6.2.6 ChessClock (`ChessClock.tsx`)
**Funkci√≥k**:
- Countdown timer
- Active/inactive state
- Warning sz√≠nek (piros < 20s)
- onTimeExpired callback

**Props**:
```typescript
{
  initialTime: number;        // milliseconds
  active: boolean;
  onTimeExpired?: () => void;
}
```

---

#### 6.2.7 MoveHistory (`moveHistory.tsx`)
**Funkci√≥k**:
- L√©p√©st√∂rt√©net megjelen√≠t√©s
- Kattinthat√≥ l√©p√©sek - visszan√©z√©s
- Aktu√°lis l√©p√©s highlight
- "Go to Latest" gomb
- Scroll to bottom auto

**Props**:
```typescript
{
  moveHistory: MoveHistoryType[];
  viewingHistoryIndex: number | null;
  onViewMove: (index: number) => void;
  onGoToLatest: () => void;
}
```

---

#### 6.2.8 ChatBox (`ChatBox.tsx`)
**Funkci√≥k**:
- Chat UI
- ‚ùå Backend nincs implement√°lva
- Placeholder √ºzenetek

**Props**:
```typescript
{
  gameId?: string;
}
```

---

#### 6.2.9 Modals

##### GameEndModal (`GameEndModal.tsx`)
- J√°t√©k v√©ge megjelen√≠t√©s
- Gy≈ëztes, vesztes, d√∂ntetlen
- Win reason
- ELO v√°ltoz√°sok
- "New Game", "Rematch" gombok (placeholder)

##### ConfirmSurrenderModal (`ConfirmSurrenderModal.tsx`)
- Felad√°s meger≈ës√≠t√©s
- Figyelmeztet≈ë √ºzenet
- Confirm/Cancel gombok

##### DrawOfferModal (`DrawOfferModal.tsx`)
- D√∂ntetlen aj√°nlat √©rtes√≠t√©s
- Ellenf√©l neve
- Accept/Decline gombok

##### CreateGameModal (`CreateGameModal.tsx`)
- J√°t√©k l√©trehoz√°s form
- Time control slider (1-30 perc)
- Increment slider (0-30 sec)
- Opponent type: Human/AI
- AI difficulty (1-8) ha AI v√°lasztva
- Create/Cancel gombok

##### PlayerProfileModal (`PlayerProfileModal.tsx`)
- J√°t√©kos profil r√©szletek
- Avatar, n√©v, ELO
- Starting/Final ELO (ha j√°t√©k v√©get √©rt)
- ELO v√°ltoz√°s
- Win/Loss statisztik√°k
- User ID

---

#### 6.2.10 GeneralSettings (`GeneralSettings.tsx`)
**Funkci√≥k**:
- Avatar upload (Firebase Storage)
- Avatar emoji v√°laszt√°s
- N√©v m√≥dos√≠t√°s
- Jelsz√≥ v√°ltoztat√°s
- Hang/√©rtes√≠t√©sek toggle
- T√©ma v√°laszt√°s (placeholder)
- Statisztik√°k megjelen√≠t√©s

---

## 9. Service Layer

### 7.1 gameService.ts
**C√©l**: J√°t√©k logika √©s Firebase m≈±veletek

**F≈ëbb Met√≥dusok**:
```typescript
class GameService {
  // J√°t√©k l√©trehoz√°s
  async createNewGame(gameId: string, settings?: GameSettings): Promise<void>

  // J√°t√©k friss√≠t√©s l√©p√©s ut√°n
  async updateGameInDb(
    gameId: string,
    gameData: Game,
    chessGame: Chess,
    fen: string,
    move: Move
  ): Promise<{ whiteChange: number; blackChange: number } | null>

  // D√∂ntetlen ok meghat√°roz√°s
  getDrawReason(chessGame: Chess): winReason | null

  // ELO sz√°m√≠t√°s
  calculateEloChange(
    winnerElo: number,
    loserElo: number,
    isDraw?: boolean
  ): { winnerChange: number; loserChange: number }

  // Firestore friss√≠t√©s j√°t√©k v√©g√©n
  async updateFirestoreOnGameEnd(
    gameId: string,
    gameData: Game,
    winner: "white" | "black" | "draw" | null
  ): Promise<{ whiteChange: number; blackChange: number } | null>

  // Kezd≈ë ELO ment√©se
  async saveStartingElo(
    gameId: string,
    whiteUid: string,
    blackUid: string
  ): Promise<void>

  // D√∂ntetlen aj√°nl√°s
  async offerDraw(gameId: string, userId: string): Promise<void>

  // D√∂ntetlen elfogad√°s
  async acceptDraw(gameId: string, gameData: Game): Promise<void>

  // D√∂ntetlen elutas√≠t√°s
  async declineDraw(gameId: string): Promise<void>

  // Felad√°s
  async surrenderGame(
    gameId: string,
    gameData: Game,
    playerSide: "white" | "black"
  ): Promise<void>

  // Megszak√≠t√°s
  async abortGame(gameId: string): Promise<void>

  // Id≈ët√∫ll√©p√©s kezel√©s
  async handleTimeout(
    gameId: string,
    gameData: Game,
    side: "white" | "black"
  ): Promise<void>
}
```

**Singleton Export**:
```typescript
export const gameService = new GameService();
```

---

### 7.2 playerService.ts
**C√©l**: J√°t√©kos kezel√©s √©s adatok

**F≈ëbb Met√≥dusok**:
```typescript
class PlayerService {
  // J√°t√©khoz csatlakoz√°s
  async joinGame(
    gameId: string,
    user: User,
    gameData: Game
  ): Promise<"white" | "black" | null>

  // J√°t√©kos oldala
  getPlayerSide(user: User | null, gameData: Game | null): "white" | "black" | null

  // J√°t√©kos vagy n√©z≈ë?
  isPlayer(user: User | null, gameData: Game | null): boolean

  // N√©z≈ë?
  isSpectator(user: User | null, gameData: Game | null): boolean

  // J√°t√©kos adatok Firestore-b√≥l
  async getPlayerData(userId: string): Promise<{
    elo: number;
    wins: number;
    losses: number;
    draws: number;
  }>

  // Mindk√©t j√°t√©kos csatlakozott?
  bothPlayersJoined(gameData: Game | null): boolean

  // Ellenf√©l adatai
  getOpponent(user: User | null, gameData: Game | null): Player | null

  // H√°tralev≈ë id≈ë sz√°m√≠t√°s
  getRemainingTime(
    side: "white" | "black",
    gameData: Game | null,
    currentTurn: "white" | "black"
  ): number
}
```

**Singleton Export**:
```typescript
export const playerService = new PlayerService();
```

---

### 7.3 aiGameService.ts
**C√©l**: AI j√°t√©k kezel√©s Lichess API-val

**F≈ëbb Met√≥dusok**:
```typescript
class AIGameService {
  // Lichess inicializ√°l√°s
  initializeLichess(token: string): void

  // AI j√°t√©k ind√≠t√°s
  async startAIGame(
    firebaseGameId: string,
    level: number,
    color: "white" | "black" | "random",
    clock?: { limit: number; increment: number }
  ): Promise<{ lichessGameId: string; assignedColor: "white" | "black" }>

  // Lichess game state stream
  streamAIGameState(
    firebaseGameId: string,
    lichessGameId: string,
    onMove: (uciMove: string, fen: string) => void
  ): () => void

  // L√©p√©s k√ºld√©s Lichess-re
  async makeAIMove(lichessGameId: string, move: string): Promise<void>

  // Best move hint (Cloud Evaluation)
  async getHint(fen: string): Promise<string | null>

  // Cleanup
  cleanupGame(firebaseGameId: string): void
}
```

**Singleton Export**:
```typescript
export const aiGameService = new AIGameService();
```

---

### 7.4 lichessService.ts
**C√©l**: Lichess API direct integr√°ci√≥

**F≈ëbb Met√≥dusok**:
```typescript
// AI challenge
async challengeAI(
  token: string,
  level: number,
  clock?: { limit: number; increment: number },
  color?: "white" | "black" | "random"
): Promise<{ gameId: string }>

// L√©p√©s k√ºld√©s
async makeMove(token: string, gameId: string, move: string): Promise<void>

// Game state stream
function streamGameState(
  token: string,
  gameId: string,
  onEvent: (event: any) => void
): () => void

// Cloud Evaluation (ingyenes, token n√©lk√ºl)
async getCloudEvaluation(fen: string, multiPv?: number): Promise<any>

// Best move javaslat
async getBestMove(fen: string): Promise<string | null>
```

**Named Exports** (nem singleton):
```typescript
export { challengeAI, makeMove, streamGameState, ... }
```

---

### 7.5 userService.ts
**C√©l**: Felhaszn√°l√≥i profilok Firestore-ban

**F≈ëbb Met√≥dusok**:
```typescript
interface UserProfile {
  uid: string;
  email: string;
  displayName: string;
  photoURL: string;
  elo: number;
  wins: number;
  losses: number;
  draws: number;
  createdAt: Timestamp;
  lastLogin: Timestamp;
}

// Profil l√©trehoz√°s
async function createUserProfile(user: User): Promise<UserProfile>

// Profil lek√©r√©s
async function getUserProfile(user: User): Promise<UserProfile>

// ELO friss√≠t√©s
async function updateUserElo(uid: string, newElo: number): Promise<void>

// Gy≈ëzelem n√∂vel√©s
async function incrementWins(uid: string): Promise<void>

// Veres√©g n√∂vel√©s
async function incrementLosses(uid: string): Promise<void>

// D√∂ntetlen n√∂vel√©s
async function incrementDraws(uid: string): Promise<void>
```

---

## 10. GUI-terv

### 10.1 Felhaszn√°l√≥i Fel√ºlet √Åttekint√©s

A ChessApp modern, s√∂t√©t t√©m√°j√∫ (dark mode) felhaszn√°l√≥i fel√ºlettel rendelkezik, amely a **Tailwind CSS** utility-first framework-√∂t haszn√°lja.

**Design Filoz√≥fia**:
- üé® **Emerald/Z√∂ld sz√≠npaletta**: F≈ësz√≠n `#10b981` (emerald-500)
- üåë **Dark mode**: Slate h√°tt√©r (`#0f172a`, `#1e293b`)
- ‚ö° **Glassmorphism**: √Åtl√°tsz√≥ k√°rty√°k, blur effektek
- üì± **Responsive**: Mobile-first approach (320px - 4K)
- ‚ôø **Accessibility**: Headless UI komponensek, keyboard navigation

---

### 10.2 Sz√≠npaletta

| Sz√≠n | Hex | Haszn√°lat |
|------|-----|-----------|
| **Emerald-400** | `#34d399` | Primary accent, hover states |
| **Emerald-500** | `#10b981` | Primary buttons, highlights |
| **Emerald-600** | `#059669` | Active states, borders |
| **Slate-900** | `#0f172a` | F≈ëh√°tt√©r |
| **Slate-800** | `#1e293b` | K√°rty√°k h√°ttere |
| **Slate-700** | `#334155` | Input mez≈ëk |
| **White** | `#ffffff` | Sz√∂veg (primary) |
| **Emerald-300** | `#6ee7b7` | Sz√∂veg (secondary) |
| **Red-500** | `#ef4444` | Error, danger |
| **Yellow-400** | `#facc15` | Warning |
| **Green-400** | `#4ade80` | Success, positive ELO |

---

### 10.3 Tipogr√°fia

**Font Family**: System font stack
```css
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 
             Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
```

**Font Sizes** (Tailwind classes):
- `text-xs`: 12px (captions, labels)
---

## 12. Biztons√°gi K√∂vetelm√©nyek)
- `text-xl`: 20px (headings)
- `text-2xl`: 24px (page titles)
- `text-4xl`: 36px (hero text)

---

### 10.4 Layout Strukt√∫ra

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Header (Sticky)                       ‚îÇ
‚îÇ  Logo ‚îÇ Nav Links ‚îÇ                    ‚îÇ User Avatar ‚ñº  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                          ‚îÇ
‚îÇ                    Main Content Area                     ‚îÇ
‚îÇ                  (Page-specific layout)                  ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ                                                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                Footer (opcion√°lis)                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Header**: Sticky top navigation (minden oldalon)
**Main**: Dynamic content (1200px max-width, centered)
**Footer**: Jelenleg nincs implement√°lva

---

### 10.5 Oldal Layoutok

#### 10.5.1 Home Page (Landing)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  [Hero Section]                                 ‚îÇ
‚îÇ    "Welcome to ChessApp"                        ‚îÇ
‚îÇ    [Quick Play Button]                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  [Features Grid - 3 columns]                    ‚îÇ
‚îÇ    ü§ñ AI Opponents                              ‚îÇ
‚îÇ    üèÜ ELO Ranking                               ‚îÇ
‚îÇ    üåê Real-time Play                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  [CTA Section]                                  ‚îÇ
‚îÇ    "Join the Chess Revolution"                  ‚îÇ
‚îÇ    [Sign Up Button]                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 10.5.2 Lobby Page
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  [Create Game Button]                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  [Active Games List]                            ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ    ‚îÇ Game #abc123  ‚îÇ 5+0  ‚îÇ 1200 vs 1250    ‚îÇ ‚îÇ
‚îÇ    ‚îÇ Player1 vs Player2  ‚îÇ [Join] [Spectate]‚îÇ ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ    ‚îÇ Game #def456  ‚îÇ 10+5 ‚îÇ 1100 vs Waiting ‚îÇ ‚îÇ
‚îÇ    ‚îÇ Player3 vs ...      ‚îÇ [Join]           ‚îÇ ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 10.5.3 Game Page (Sakkt√°bla)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  [PlayerInfo]    ‚îÇ  ‚îÇ  [MoveHistory]           ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚óè Black         ‚îÇ  ‚îÇ   1. e4 e5               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚è± 05:00        ‚îÇ  ‚îÇ   2. Nf3 Nc6             ‚îÇ ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ   3. Bb5 ...             ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  ‚îÇ   [Chessboard]   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ  [ChatBox]               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ   8x8 squares    ‚îÇ  ‚îÇ  Player1: Good game!     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ  Player2: You too!       ‚îÇ ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  ‚îÇ  [PlayerInfo]    ‚îÇ  [Surrender] [Draw] [Abort]  ‚îÇ
‚îÇ  ‚îÇ  ‚óè White         ‚îÇ                               ‚îÇ
‚îÇ  ‚îÇ  ‚è± 04:55        ‚îÇ                               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 10.5.4 Leaderboard Page
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üèÜ Top Players                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Rank ‚îÇ Player        ‚îÇ ELO ‚îÇ W/L     ‚îÇ Win %   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  1   ‚îÇ üëë GrandMaster‚îÇ 2100‚îÇ 150/50  ‚îÇ 75%     ‚îÇ
‚îÇ  2   ‚îÇ üéØ ProPlayer  ‚îÇ 1950‚îÇ 120/60  ‚îÇ 67%     ‚îÇ
‚îÇ  3   ‚îÇ ‚öî Warrior     ‚îÇ 1850‚îÇ 100/70  ‚îÇ 59%     ‚îÇ
‚îÇ  ...                                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### 10.6 Komponens St√≠lusok

#### 10.6.1 Button St√≠lusok
```css
/* Primary Button */
bg-emerald-600 hover:bg-emerald-700 text-white 
rounded-lg px-4 py-2 transition-colors

/* Secondary Button */
bg-slate-700 hover:bg-slate-600 text-emerald-400 
border border-emerald-600/30

/* Danger Button */
bg-red-600 hover:bg-red-700 text-white
```

#### 10.6.2 Card St√≠lusok
```css
bg-slate-800 border border-emerald-600/30 
rounded-xl shadow-lg shadow-emerald-500/10 p-6
```

#### 10.6.3 Input St√≠lusok
```css
bg-slate-700 border border-emerald-600/30 
text-white rounded-lg px-4 py-2 
focus:ring-2 focus:ring-emerald-500
```

#### 10.6.4 Modal St√≠lusok
```css
/* Backdrop */
bg-black/50 backdrop-blur-sm

/* Modal Content */
bg-slate-800 border border-emerald-600/50 
rounded-2xl shadow-2xl shadow-emerald-500/20 p-8
max-w-md
```

---

### 10.7 Responsive Breakpoints

| Breakpoint | Width | Le√≠r√°s |
|------------|-------|--------|
| `sm` | 640px | Telefon (landscape) |
| `md` | 768px | Tablet |
| `lg` | 1024px | Laptop |
| `xl` | 1280px | Desktop |
| `2xl` | 1536px | Large desktop |

**Mobile Optimaliz√°ci√≥**:
- Hamburger men√º < 768px
- Sakkt√°bla m√©ret: 100% width (mobile), 600px (desktop)
- Stack layout (vertical) < 768px

---

### 10.8 Anim√°ci√≥k √©s √Åtmenetek

**Tailwind Transition Classes**:
```css
transition-all duration-300 ease-in-out     /* Smooth transitions */
hover:scale-105                             /* Hover grow effect */
active:scale-95                             /* Click shrink effect */
animate-pulse                               /* Loading states */
animate-bounce                              /* Attention grabber */
```

**Custom Anim√°ci√≥k**:
- Hero section: Fade-in + slide-up (Framer Motion)
- Modal: Scale + fade-in
- Toast notifications: Slide-in from top

---

### 10.9 Ikonok

**Forr√°s**: Heroicons, Lucide React

**Gyakori Ikonok**:
- ‚ôüÔ∏è `ChevronRightIcon` - Navig√°ci√≥
- üë§ `UserIcon` - Profil
- ‚öôÔ∏è `Cog6ToothIcon` - Be√°ll√≠t√°sok
- üèÜ `TrophyIcon` - Leaderboard
- üéÆ `PlayIcon` - Quick Play
- üö™ `ArrowRightOnRectangleIcon` - Logout
- ‚è±Ô∏è `ClockIcon` - Timer

---

### 10.10 Accessibility (A11y)

**Implement√°lt Funkci√≥k**:
- ‚úÖ Keyboard navigation (Tab, Enter, Escape)
- ‚úÖ Focus states (ring-2 ring-emerald-500)
- ‚úÖ ARIA labels (Headless UI komponensek)
- ‚úÖ Color contrast: AAA rating (white on dark slate)
- ‚ö†Ô∏è Hi√°ny: Screen reader optimaliz√°ci√≥ (sakkt√°bla)

---

## 11. Routing & Navig√°ci√≥

### 8.1 Route Konfigur√°ci√≥

```typescript
<Router>
  <Routes>
    <Route path="/" element={<Layout><Home /></Layout>} />
    <Route path="/profile" element={<Layout><SettingsScreen /></Layout>} />
    <Route path="/lobby" element={<Layout><Lobby /></Layout>} />
    <Route path="/mygames" element={<Layout><MyGames /></Layout>} />
    <Route path="/leaderboard" element={<Layout><Leaderboard /></Layout>} />
    <Route path="/login" element={<LoginForm />} />
    <Route path="/register" element={<RegisterForm />} />
    <Route path="/test" element={<Layout><TailwindColumns /></Layout>} />
    <Route path="/game/:gameId" element={<Layout><ChessGame /></Layout>} />
  </Routes>
</Router>
```

### 8.2 Navig√°ci√≥s Strukt√∫ra

```
Header Navigation:
‚îú‚îÄ‚îÄ Home (/)
‚îú‚îÄ‚îÄ Profile (/profile)
‚îú‚îÄ‚îÄ Lobbies (/lobby)
‚îú‚îÄ‚îÄ My Games (/mygames)
‚îî‚îÄ‚îÄ Leaderboard (/leaderboard)

Auth:
‚îú‚îÄ‚îÄ Login (/login)
‚îî‚îÄ‚îÄ Register (/register)

Game:
‚îî‚îÄ‚îÄ /game/:gameId (dynamic)
```

### 8.3 V√©dett Route-ok
‚ùå **Jelenleg nincs implement√°lva**
- Minden route publikus
- Auth state ellen≈ërz√©s komponens szinten

---

## 9. Biztons√°gi K√∂vetelm√©nyek

### 9.1 Firebase Security Rules

#### 9.1.1 Firestore Rules
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
```
**Probl√©m√°k**:
- ‚ùå T√∫l permissz√≠v (minden bejelentkezett user √≠rhat/olvashat mindent)
- üîÆ Jav√≠tand√≥: User saj√°t dokumentumait √≠rhatja, m√°sok olvashat√≥k

#### 9.1.2 Realtime Database Rules
```json
{
  "rules": {
    ".read": false,
    ".write": false
  }
}
```
**Probl√©m√°k**:
- ‚ùå T√∫l restrikt√≠v (semmi nem m≈±k√∂dik)
- üîÆ Jav√≠tand√≥: Auth alap√∫ hozz√°f√©r√©s

**Aj√°nlott Rules**:
```json
{
  "rules": {
    "games": {
      "$gameId": {
        ".read": "auth != null",
        ".write": "auth != null"
      }
    }
  }
}
```

### 9.2 API Kulcsok
- ‚úÖ `.env` f√°jlban t√°rolva
- ‚úÖ `.gitignore`-ban
- ‚ùå Firebase API kulcs nincs domain-re korl√°tozva
- üîÆ Jav√≠tand√≥: Firebase Console-ban domain whitelist

### 9.3 Lichess Token
- ‚úÖ `.env` f√°jlban (`VITE_LICHESS_TOKEN`)
- ‚úÖ Csak AI j√°t√©kokhoz sz√ºks√©ges
- ‚ùå Client-side t√°rolva (nem titkos√≠tott)
- üîÆ Javaslat: Server-side proxy (Firebase Functions)

---

## 13. Telep√≠t√©si Le√≠r√°s

### 13.1 El≈ëfelt√©telek

**Sz√ºks√©ges Szoftverek**:
- Node.js 18+ (LTS verzi√≥ aj√°nlott)
- npm 9+ vagy yarn 1.22+
- Git (verzi√≥kezel√©s)
- Firebase CLI: `npm install -g firebase-tools`
- Modern b√∂ng√©sz≈ë (Chrome, Firefox, Safari, Edge)

**Firebase Projekt Be√°ll√≠t√°sa**:
1. Firebase Console: `https://console.firebase.google.com`
2. "Add project" ‚Üí Project n√©v megad√°s
3. Google Analytics enged√©lyez√©se (opcion√°lis)
4. Realtime Database l√©trehoz√°sa (Start in locked mode)
5. Firestore l√©trehoz√°sa (Start in production mode)
6. Authentication enged√©lyez√©se (Email/Password, Google)
7. Storage l√©trehoz√°sa (Default rules)

---

### 13.2 Lok√°lis Fejleszt≈ëi K√∂rnyezet Telep√≠t√©se

#### L√©p√©s 1: Repository Kl√≥noz√°sa
```bash
git clone https://github.com/sandortorok/ChessApp.git
cd ChessApp/chess-frontend
```

#### L√©p√©s 2: F√ºgg≈ës√©gek Telep√≠t√©se
```bash
npm install
# vagy
yarn install
```

#### L√©p√©s 3: Environment Variables Be√°ll√≠t√°sa
Hozz l√©tre egy `.env` f√°jlt a `chess-frontend/` mapp√°ban:
```env
VITE_APP_TITLE=ChessApp
VITE_FIREBASE_API_KEY=your_api_key
VITE_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
VITE_FIREBASE_DATABASE_URL=https://your_project.firebaseio.com
VITE_FIREBASE_PROJECT_ID=your_project_id
VITE_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
VITE_FIREBASE_APP_ID=your_app_id
VITE_LICHESS_TOKEN=lip_YourLichessToken
```

**Firebase konfigur√°ci√≥ megszerz√©se**:
- Firebase Console ‚Üí Project Settings ‚Üí General ‚Üí Your apps ‚Üí Web app
- Copy-paste a config √©rt√©keket

**Lichess token megszerz√©se** (AI j√°t√©khoz):
- `https://lichess.org/account/oauth/token/create`
- Scopes: `board:play`, `challenge:write`

#### L√©p√©s 4: Firebase Security Rules Be√°ll√≠t√°sa

**Realtime Database Rules** (`database.rules.json`):
```json
{
  "rules": {
    "games": {
      "$gameId": {
        ".read": "auth != null",
        ".write": "auth != null"
      }
    }
  }
}
```

**Firestore Rules** (`firestore.rules`):
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

Deploy rules:
```bash
firebase deploy --only database
firebase deploy --only firestore:rules
```

#### L√©p√©s 5: Fejleszt≈ëi Szerver Ind√≠t√°sa
```bash
npm run dev
# vagy
yarn dev
```

B√∂ng√©sz≈ë: `http://localhost:5173`

---

### 13.3 Production Build √©s Deployment

#### L√©p√©s 1: Production Build K√©sz√≠t√©se
```bash
npm run build
# vagy
yarn build
```

Output: `chess-frontend/dist/` folder

**Build ellen≈ërz√©s**:
```bash
npm run preview
# vagy
yarn preview
```

#### L√©p√©s 2: Firebase Hosting Inicializ√°l√°s (els≈ë alkalommal)
```bash
firebase login
firebase init hosting
```

**Be√°ll√≠t√°sok**:
- Public directory: `dist`
- Single-page app: Yes
- GitHub auto-deploys: No (manu√°lis deployment)

#### L√©p√©s 3: Firebase Deployment
```bash
firebase deploy --only hosting
```

**Deployment URL**: `https://your-project-id.web.app`

---

### 13.4 Firebase Functions Telep√≠t√©se (Opcion√°lis)

A projekt tartalmaz egy minim√°lis Functions setup-ot:

```bash
cd functions
npm install
npm run build
cd ..
firebase deploy --only functions
```

**Megjegyz√©s**: Jelenleg a Functions √ºres (csak index.js placeholder)

---

### 13.5 Hibaelh√°r√≠t√°s

**Probl√©ma**: "Firebase config is not defined"
- **Megold√°s**: Ellen≈ërizd a `.env` f√°jlt, minden VITE_ prefixszel rendelkezik-e

**Probl√©ma**: "Permission denied" Firebase-ben
- **Megold√°s**: Ellen≈ërizd a security rules-t, authentik√°ci√≥s state-et

**Probl√©ma**: Build error: "Module not found"
- **Megold√°s**: `rm -rf node_modules package-lock.json && npm install`

**Probl√©ma**: Lichess API error 401
- **Megold√°s**: Gener√°lj √∫j Lichess tokent, ellen≈ërizd a scope-okat

---

### 13.6 Continuous Integration (CI/CD)

**Jelenlegi √Ållapot**: ‚ùå GitHub Actions t√∂r√∂lve (manu√°lis deployment)

**Aj√°nlott CI/CD** (opcion√°lis):
```yaml
# .github/workflows/deploy.yml
name: Deploy to Firebase
on:
  push:
    branches: [main]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci
      - run: npm run build
      - uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: '${{ secrets.GITHUB_TOKEN }}'
          firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT }}'
```

---

### 13.7 Monitoring √©s Maintenance

**Firebase Console**:
- Realtime Database: Usage metrics
- Authentication: Active users
- Hosting: Bandwidth, requests

**Aj√°nlott Monitoring** (nincs implement√°lva):
- Firebase Performance Monitoring
- Google Analytics
- Error tracking (Sentry)

---

## 14. A Program K√©sz√≠t√©se Sor√°n Felhaszn√°lt Eszk√∂z√∂k

### 14.1 Fejleszt≈ëi Eszk√∂z√∂k

**IDE / Editor**:
- Visual Studio Code 1.80+ (aj√°nlott)
  - Extensions: ESLint, Prettier, Tailwind IntelliSense, Firebase
- WebStorm (alternat√≠va)

**Verzi√≥kezel√©s**:
- Git 2.40+
- GitHub (repository hosting)
- GitHub Desktop (GUI, opcion√°lis)

**Package Manager**:
- npm 9+ (Node.js-sel egy√ºtt)
- yarn 1.22+ (alternat√≠va)

**CLI Tools**:
- Firebase CLI 12+ (`npm install -g firebase-tools`)
- Vite CLI (projekt r√©sze)

---

### 14.2 Frontend Technol√≥gi√°k

**Core Framework**:
- React 19.1.1
- TypeScript 5.8.3
- Vite 7.1.7 (build tool)

**UI Framework**:
- Tailwind CSS 4.1.14
- Headless UI 2.2.9
- Heroicons 2.2.0
- Lucide React 0.469.0

**Chess Specifikus**:
- Chess.js 1.4.0 (sakk logika engine)
- react-chessboard 5.6.1 (sakkt√°bla komponens)

**State Management**:
- React useState, useRef, useEffect (built-in)
- Firebase Realtime listeners (real-time sync)

**Routing**:
- React Router DOM 7.9.3

**Utilities**:
- nanoid 5.0.9 (unique ID gener√°l√°s)
- date-fns 4.1.0 (d√°tum kezel√©s)

---

### 14.3 Backend Technol√≥gi√°k (Firebase)

**Firebase Services**:
- Firebase SDK 12.3.0
  - Authentication
  - Realtime Database
  - Cloud Firestore
  - Storage
  - Hosting
  - Functions (Node.js 18)

**K√ºls≈ë API**:
- Lichess.org Board API (AI j√°t√©k)
- Lichess.org Cloud Evaluation API (hint)

---

### 14.4 Testing & Quality Assurance

**Linter**:
- ESLint 9.36.0
- ESLint React Hooks Plugin
- ESLint React Refresh Plugin

**Type Checking**:
- TypeScript Compiler (tsc)

**Code Formatting**:
- Prettier (aj√°nlott, nincs konfigur√°lva)

**Testing** (nincs implement√°lva):
- Vitest (aj√°nlott)
- React Testing Library
- Playwright / Cypress (E2E)

---

### 14.5 Design & Assets

**Design Tool**:
- Figma (UI/UX tervez√©s - nincs f√°jl)
- Sketch (alternat√≠va)

**Ikonok**:
- Heroicons (React komponensek)
- Lucide React (SVG ikonok)
- Emoji (avatar placeholder)

**Sz√≠npaletta Generator**:
- Tailwind CSS Color Palette
- Coolors.co

---

### 14.6 Collaboration & Project Management

**Verzi√≥kezel√©s**:
- GitHub (sandortorok/ChessApp)
- Git branching strategy: main branch (single branch)

**Dokument√°ci√≥**:
- Markdown (README.md, SPECIFICATION.md)
- JSDoc (inline k√≥d dokument√°ci√≥ - r√©szben)

**Project Management** (nincs haszn√°lva):
- GitHub Projects
- Trello
- Jira

---

### 14.7 Performance & Optimization

**Build Optimaliz√°ci√≥**:
- Vite (automatic code splitting, tree shaking)
- TypeScript (type checking pre-runtime)

**Bundle Analyzer** (nincs haszn√°lva):
- rollup-plugin-visualizer

**Performance Monitoring** (nincs haszn√°lva):
- Firebase Performance Monitoring SDK
- Lighthouse (Chrome DevTools)

---

### 14.8 Deployment & Hosting

**Hosting Platform**:
- Firebase Hosting (CDN, HTTPS, automatic)

**Deployment Tool**:
- Firebase CLI (`firebase deploy`)

**CI/CD** (nincs haszn√°lva):
- GitHub Actions (t√∂r√∂lve)

---

### 14.9 Third-Party Services

**Authentication Providers**:
- Firebase Authentication (Email, Google, Anonymous)

**AI Engine**:
- Lichess.org Stockfish AI (1-8 neh√©zs√©g)

**Cloud Storage**:
- Firebase Storage (avatar k√©pek)

---

### 14.10 Development Dependencies

**Teljes Lista** (`package.json` alapj√°n):
```json
{
  "dependencies": {
    "react": "^19.1.1",
    "react-dom": "^19.1.1",
    "firebase": "^12.3.0",
    "chess.js": "^1.4.0",
    "react-chessboard": "^5.6.1",
    "react-router-dom": "^7.9.3",
    "tailwindcss": "^4.1.14",
    "@headlessui/react": "^2.2.9",
    "@heroicons/react": "^2.2.0",
    "lucide-react": "^0.469.0",
    "nanoid": "^5.0.9",
    "date-fns": "^4.1.0"
  },
  "devDependencies": {
    "typescript": "^5.8.3",
    "vite": "^7.1.7",
    "@vitejs/plugin-react": "^4.4.5",
    "eslint": "^9.36.0",
    "@types/react": "^19.1.7",
    "@types/react-dom": "^19.1.3"
  }
}
```

---

## 15. Deployment

### 15.1 Build Process
```bash
npm run build
```
- TypeScript compile (`tsc -b`)
- Vite build
- Output: `dist/` folder

### 10.2 Hosting
- **Platform**: Firebase Hosting
- **URL**: `https://bme-chessapp.web.app`
- **Deploy Command**:
  ```bash
  firebase deploy --only hosting
  ```

### 10.3 Environment Variables

#### Development (`.env`)
```env
VITE_APP_TITLE=ChessApp
VITE_FIREBASE_API_KEY=...
VITE_FIREBASE_AUTH_DOMAIN=...
VITE_FIREBASE_DATABASE_URL=...
VITE_FIREBASE_PROJECT_ID=...
VITE_FIREBASE_STORAGE_BUCKET=...
VITE_FIREBASE_MESSAGING_SENDER_ID=...
VITE_FIREBASE_APP_ID=...
VITE_LICHESS_TOKEN=lip_...
```

#### Production (`.env.production`)
- Ugyanaz, mint `.env`
- Build time-ban be√©get≈ëdik (Vite)

### 10.4 CI/CD
- ‚ùå **GitHub Actions t√∂r√∂lve** (auto-deploy kikapcsolva)
- ‚úÖ Manu√°lis deployment (`firebase deploy`)

---

## 11. Hi√°nyoss√°gok & Fejleszt√©si Javaslatok

### 11.1 Kritikus Hi√°nyoss√°gok

#### 11.1.1 Firebase Security Rules
**Probl√©ma**: Realtime DB √≠r√°s/olvas√°s blokkolva
**Megold√°s**:
```json
{
  "rules": {
    "games": {
      "$gameId": {
        ".read": "auth != null",
        ".write": "auth != null && (
          !data.exists() || 
          data.child('players/white/uid').val() == auth.uid || 
          data.child('players/black/uid').val() == auth.uid
        )"
      }
    }
  }
}
```

#### 11.1.2 Firestore Security Rules
**Probl√©ma**: T√∫l permissz√≠v
**Megold√°s**:
```javascript
match /users/{userId} {
  allow read: if request.auth != null;
  allow write: if request.auth != null && request.auth.uid == userId;
}
```

#### 11.1.3 Chat Backend
**Probl√©ma**: ChatBox komponens van, de nincs backend
**Megold√°s**: Firestore alap√∫ chat collection

### 11.2 UX Jav√≠t√°sok

- ‚ùå Loading states hi√°nyosak
- ‚ùå Error handling hi√°nyos
- ‚ùå Nincs offline support
- ‚ùå Nincs PWA support
- ‚ùå Nincs dark mode (csak placeholder)
- ‚ùå Settings tabok √ºresek (Billing, Friends, stb.)

### 11.3 Teljes√≠tm√©ny

- ‚ùå Nincs code splitting
- ‚ùå Nincs lazy loading
- ‚ùå Firebase listeners nem mindig tiszt√≠t√≥dnak
- ‚ùå Sok re-render (optimaliz√°lhat√≥ React.memo-val)

### 11.4 Funkcion√°lis Hi√°nyoss√°gok

- ‚ùå Nincs AI hint gomb (Lichess Cloud Eval van, de nincs UI)
- ‚ùå Nincs game invite system (link megoszt√°s)
- ‚ùå Nincs friend system
- ‚ùå Nincs rematch funkci√≥
- ‚ùå Nincs game analysis
- ‚ùå Nincs puzzle/training mode

---

## 12. Tesztel√©s

### 12.1 Jelenlegi Teszt St√°tusz
- ‚ùå **Nincs unit teszt**
- ‚ùå **Nincs integration teszt**
- ‚ùå **Nincs E2E teszt**
- ‚úÖ Manu√°lis tesztel√©s csak

### 12.2 Aj√°nlott Tesztek

#### Unit Tesztek
- `gameService.calculateEloChange()`
- `gameService.getDrawReason()`
- `playerService.getRemainingTime()`
- Chess.js move validation

#### Integration Tesztek
- Firebase CRUD m≈±veletek
- Lichess API h√≠v√°sok
- Auth flow

#### E2E Tesztek (Playwright/Cypress)
- Teljes j√°t√©k flow
- Lobby join
- Game end scenarios

---

## 13. Dokument√°ci√≥

### 13.1 Megl√©v≈ë Dokument√°ci√≥
- ‚úÖ `README.md` (chess-frontend) - Setup instructions
- ‚úÖ `services/README.md` - Service layer dokument√°ci√≥
- ‚úÖ `services/lichessService.README.md` - Lichess API docs
- ‚úÖ `SPECIFICATION.md` - Ez a f√°jl

### 13.2 Hi√°nyz√≥ Dokument√°ci√≥
- ‚ùå API dokument√°ci√≥
- ‚ùå Komponens dokument√°ci√≥ (Storybook)
- ‚ùå Deployment guide
- ‚ùå Contributing guide
- ‚ùå Architecture Decision Records (ADR)

---

## 14. Licenc & Szerz≈ëi Jog

**Tulajdonos**: S√°ndor T√∂r√∂k
**GitHub**: sandortorok/ChessApp
**Projekt St√°tusz**: üöß Fejleszt√©s alatt

---

## 15. Tervez√©si Mint√°k

### 15.1 Jelenlegi Tervez√©si Mint√°k

#### 15.1.1 Singleton Pattern
**Haszn√°lat**: Service layer
```typescript
// gameService.ts
class GameService {
  // ... implementation
}
export const gameService = new GameService();

// playerService.ts
class PlayerService {
  // ... implementation
}
export const playerService = new PlayerService();
```

**El≈ëny√∂k**:
- ‚úÖ Egyetlen service instance az alkalmaz√°sban
- ‚úÖ K√∂zpontos√≠tott state √©s logika
- ‚úÖ K√∂nny≈± tesztelhet≈ës√©g (mockable)

**Alkalmaz√°s**:
- `gameService` - J√°t√©k m≈±veletek
- `playerService` - J√°t√©kos m≈±veletek
- `aiGameService` - AI j√°t√©k kezel√©s

---

#### 15.1.2 Service Layer Pattern
**Haszn√°lat**: √úzleti logika elk√ºl√∂n√≠t√©se

```typescript
// ChessGame.tsx (Controller)
const handleMove = async () => {
  await gameService.updateGameInDb(gameId, gameData, chessGame, fen, move);
};

// gameService.ts (Service)
class GameService {
  async updateGameInDb(...) {
    // √úzleti logika: valid√°l√°s, id≈ësz√°m√≠t√°s, ELO, Firebase
  }
}
```

**El≈ëny√∂k**:
- ‚úÖ Separation of Concerns
- ‚úÖ √öjrafelhaszn√°lhat√≥ logika
- ‚úÖ K√∂nnyen tesztelhet≈ë
- ‚úÖ Komponensek egyszer≈±bbek

**Alkalmaz√°s**:
- J√°t√©k m≈±veletek (create, update, end)
- J√°t√©kos m≈±veletek (join, getPlayerData)
- AI m≈±veletek (Lichess API h√≠v√°sok)

---

#### 15.1.3 Presentational & Container Components
**Haszn√°lat**: UI √©s logika sz√©tv√°laszt√°sa

```typescript
// ChessGame.tsx (Container - Smart Component)
const ChessGame = () => {
  // State, Firebase listeners, game logic
  const [chessPosition, setChessPosition] = useState(...)
  const [gameData, setGameData] = useState(...)
  // ...
  return <ChessGameView {...props} />;
}

// ChessGameView.tsx (Presentational - Dumb Component)
const ChessGameView = (props) => {
  // Csak renderel√©s, nincs business logic
  return <div>...</div>;
}
```

**El≈ëny√∂k**:
- ‚úÖ Tiszt√°bb komponens strukt√∫ra
- ‚úÖ UI k√∂nnyen √∫jrafelhaszn√°lhat√≥
- ‚úÖ K√∂nnyebb tesztel√©s

**Alkalmaz√°s**:
- `ChessGame` (logika) + `ChessGameView` (UI)
- `PlayerInfo` (prezent√°ci√≥s)
- `ChessClock` (prezent√°ci√≥s)

---

#### 15.1.4 Observer Pattern (Firebase Real-time)
**Haszn√°lat**: Real-time adatszinkroniz√°ci√≥

```typescript
// Firebase listener (Observer)
useEffect(() => {
  const gameRef = ref(db, `games/${gameId}`);
  const unsubscribe = onValue(gameRef, (snapshot) => {
    const data = snapshot.val();
    setGameData(data); // Automatikus UI friss√≠t√©s
  });
  return () => unsubscribe(); // Cleanup
}, [gameId]);
```

**El≈ëny√∂k**:
- ‚úÖ Automatikus UI friss√≠t√©s
- ‚úÖ Multi-user real-time sync
- ‚úÖ Event-driven architecture

**Alkalmaz√°s**:
- J√°t√©k √°llapot (l√©p√©sek, id≈ë, status)
- J√°t√©kos csatlakoz√°s
- Chat √ºzenetek (placeholder)

---

#### 15.1.5 Custom Hooks Pattern
**Haszn√°lat**: Logika √∫jrafelhaszn√°l√°s

```typescript
// useAuth.ts
export const useAuth = () => {
  const [currentUser, setCurrentUser] = useState<User | null>(null);
  
  useEffect(() => {
    const unsubscribe = onAuthStateChanged(auth, (user) => {
      setCurrentUser(user);
    });
    return unsubscribe;
  }, []);
  
  return { currentUser, loading };
};

// Haszn√°lat komponensben
const { currentUser, loading } = useAuth();
```

**El≈ëny√∂k**:
- ‚úÖ Logika megoszt√°s komponensek k√∂z√∂tt
- ‚úÖ Tiszt√°bb komponensek
- ‚úÖ K√∂nnyebb tesztel√©s

**Alkalmaz√°s**:
- `useAuth()` - Authentication state
- üîÆ Potenci√°lis: `useGame(gameId)`, `usePlayer(userId)`

---

#### 15.1.6 Composition Pattern
**Haszn√°lat**: Layout komponensek

```typescript
// Layout.tsx
const Layout = ({ children }) => {
  return (
    <div>
      <Header />
      <main>{children}</main>
    </div>
  );
};

// Haszn√°lat
<Layout>
  <Home />
</Layout>
```

**El≈ëny√∂k**:
- ‚úÖ Flexibilis komponens strukt√∫ra
- ‚úÖ √öjrafelhaszn√°lhat√≥ layout
- ‚úÖ Children prop pattern

**Alkalmaz√°s**:
- `Layout` komponens (Header + content wrapper)
- Modal komponensek (backdrop + content)

---

#### 15.1.7 Strategy Pattern (implicit)
**Haszn√°lat**: ELO sz√°m√≠t√°s, game end logika

```typescript
// gameService.ts
getDrawReason(chessGame: Chess): winReason | null {
  if (chessGame.isStalemate()) return "stalemate";
  if (chessGame.isThreefoldRepetition()) return "threefoldRepetition";
  if (chessGame.isInsufficientMaterial()) return "insufficientMaterial";
  if (chessGame.isDraw()) return "draw";
  return null;
}
```

**El≈ëny√∂k**:
- ‚úÖ K√ºl√∂nb√∂z≈ë algoritmusok (stalemate, checkmate, timeout)
- ‚úÖ K√∂nnyen b≈ëv√≠thet≈ë √∫j win conditions-el

**Alkalmaz√°s**:
- Game end detekci√≥ (9 k√ºl√∂nb√∂z≈ë ok)
- ELO sz√°m√≠t√°s (gy≈ëzelem, veres√©g, d√∂ntetlen)

---

#### 15.1.8 Module Pattern
**Haszn√°lat**: Service exports

```typescript
// services/index.ts
export { gameService } from './gameService';
export { playerService } from './playerService';
export { aiGameService } from './aiGameService';
export * from './lichessService';
export * from './userService';

// Haszn√°lat
import { gameService, playerService } from '@/services';
```

**El≈ëny√∂k**:
- ‚úÖ K√∂zpontos√≠tott exports
- ‚úÖ Tiszt√°bb imports
- ‚úÖ Namespace protection

---

### 15.2 Hi√°nyz√≥ Tervez√©si Mint√°k (Javaslatok)

#### 15.2.1 Repository Pattern
**C√©l**: Adatb√°zis m≈±veletek absztrakci√≥ja

```typescript
// Aj√°nlott implement√°ci√≥
class GameRepository {
  async findById(gameId: string): Promise<Game | null> { }
  async save(game: Game): Promise<void> { }
  async update(gameId: string, updates: Partial<Game>): Promise<void> { }
  async delete(gameId: string): Promise<void> { }
  async findByUserId(userId: string): Promise<Game[]> { }
}

class UserRepository {
  async findById(userId: string): Promise<UserProfile | null> { }
  async save(user: UserProfile): Promise<void> { }
  async updateElo(userId: string, elo: number): Promise<void> { }
  async getTopPlayers(limit: number): Promise<UserProfile[]> { }
}
```

**El≈ëny√∂k**:
- ‚úÖ Firebase specifikus logika elrejt√©se
- ‚úÖ K√∂nnyebb v√°lt√°s m√°s DB-re
- ‚úÖ Mockable tesztel√©shez
- ‚úÖ Centraliz√°lt query logika

**Jelenlegi probl√©ma**: Firebase h√≠v√°sok sz√©tsz√≥rva a service-ekben

---

#### 15.2.2 Factory Pattern
**C√©l**: Komplex objektumok l√©trehoz√°sa

```typescript
// Aj√°nlott implement√°ci√≥
class GameFactory {
  createHumanGame(settings: GameSettings): Game {
    return {
      fen: INITIAL_FEN,
      moves: [],
      players: { white: null, black: null },
      status: "waiting",
      timeControl: settings.timeControl,
      opponentType: "human",
      // ... default values
    };
  }
  
  createAIGame(settings: AIGameSettings): Game {
    return {
      ...this.createHumanGame(settings),
      opponentType: "ai",
      lichessGameId: null,
    };
  }
}

class PlayerFactory {
  createPlayerFromFirebaseUser(user: User): Player {
    return {
      uid: user.uid,
      name: user.displayName || user.email,
      displayName: user.displayName,
      email: user.email,
      elo: 1200, // Default
      wins: 0,
      losses: 0,
      draws: 0,
    };
  }
}
```

**El≈ëny√∂k**:
- ‚úÖ Konzisztens objektum l√©trehoz√°s
- ‚úÖ Default √©rt√©kek k√∂zpontos√≠t√°sa
- ‚úÖ K√∂nnyebb tesztel√©s

**Jelenlegi probl√©ma**: Objektum l√©trehoz√°s sz√©tsz√≥rva (gameService, playerService)

---

#### 15.2.3 Facade Pattern
**C√©l**: Komplex API-k egyszer≈±s√≠t√©se

```typescript
// Aj√°nlott implement√°ci√≥
class ChessFacade {
  private gameService: GameService;
  private playerService: PlayerService;
  private aiGameService: AIGameService;
  
  async startNewGame(userId: string, settings: GameSettings): Promise<string> {
    const gameId = generateId();
    await this.gameService.createNewGame(gameId, settings);
    await this.playerService.joinGame(gameId, userId);
    if (settings.opponentType === "ai") {
      await this.aiGameService.startAIGame(gameId, settings.aiLevel);
    }
    return gameId;
  }
  
  async makeMove(gameId: string, move: Move): Promise<void> {
    // Orchestrate multiple services
    await this.gameService.updateGameInDb(...);
    if (gameData.opponentType === "ai") {
      await this.aiGameService.makeAIMove(...);
    }
  }
}
```

**El≈ëny√∂k**:
- ‚úÖ Egyszer≈±s√≠tett API komponenseknek
- ‚úÖ T√∂bb service koordin√°l√°sa
- ‚úÖ Komponensek kevesebb service-t≈ël f√ºggenek

**Jelenlegi probl√©ma**: Komponensek sok service-t import√°lnak

---

#### 15.2.4 Decorator Pattern
**C√©l**: Funkci√≥k dinamikus kiterjeszt√©se

```typescript
// Aj√°nlott implement√°ci√≥
class BaseGameService { }

class LoggingGameServiceDecorator extends BaseGameService {
  async updateGameInDb(...args) {
    console.log("Updating game:", args);
    const result = await super.updateGameInDb(...args);
    console.log("Game updated:", result);
**Changelog**:
- **v3.0.0** (2025-10-17): Teljes specifik√°ci√≥ - √∂sszes fejezet hozz√°adva
  - Rendszer c√©lja √©s k√∂rnyezete
  - Feladatki√≠r√°s
  - Adat- √©s adatb√°zisterv (entit√°s-rel√°ci√≥s modell)
  - Objektummodell (6 entit√°s r√©szletezve)
  - GUI-terv (sz√≠nek, tipogr√°fia, layoutok)
  - Telep√≠t√©si le√≠r√°s (lok√°lis + production)
  - Felhaszn√°lt eszk√∂z√∂k
- **v2.0.0** (2025-10-17): Tervez√©si mint√°k szakasz hozz√°adva
- **v1.0.0** (2025-10-17): Kezdeti verzi√≥ (architekt√∫ra + komponensek)

class CachingGameServiceDecorator extends BaseGameService {
  private cache = new Map();
  
  async getGameById(gameId: string) {
    if (this.cache.has(gameId)) {
      return this.cache.get(gameId);
    }
    const game = await super.getGameById(gameId);
    this.cache.set(gameId, game);
    return game;
  }
}
```

**El≈ëny√∂k**:
- ‚úÖ Logging hozz√°ad√°sa production-ben
- ‚úÖ Caching r√©teg
- ‚úÖ Performance monitoring
- ‚úÖ Error tracking

**Haszn√°lati eset**: Development vs Production k√ºl√∂nbs√©gek

---

#### 15.2.5 Command Pattern
**C√©l**: Akci√≥k visszavonhat√≥s√°ga (Undo/Redo)

```typescript
// Aj√°nlott implement√°ci√≥
interface Command {
  execute(): void;
  undo(): void;
}

class MoveCommand implements Command {
  constructor(
    private chessGame: Chess,
    private move: Move
  ) {}
  
  execute() {
    this.chessGame.move(this.move);
  }
  
  undo() {
    this.chessGame.undo();
  }
}

class CommandHistory {
  private history: Command[] = [];
  private currentIndex = -1;
  
  execute(command: Command) {
    command.execute();
    this.history = this.history.slice(0, this.currentIndex + 1);
    this.history.push(command);
    this.currentIndex++;
  }
  
  undo() {
    if (this.currentIndex >= 0) {
      this.history[this.currentIndex].undo();
      this.currentIndex--;
    }
  }
  
  redo() {
    if (this.currentIndex < this.history.length - 1) {
      this.currentIndex++;
      this.history[this.currentIndex].execute();
    }
  }
}
```

**El≈ëny√∂k**:
- ‚úÖ Undo/Redo funkci√≥
- ‚úÖ Move history t√°rol√°s
- ‚úÖ Time travel debugging

**Haszn√°lati eset**: Game analysis, training mode

---

#### 15.2.6 State Pattern
**C√©l**: J√°t√©k √°llapot kezel√©s

```typescript
// Aj√°nlott implement√°ci√≥
interface GameState {
  handleMove(game: Game, move: Move): void;
  canJoin(game: Game): boolean;
  canAbort(game: Game): boolean;
}

class WaitingState implements GameState {
  handleMove() {
    throw new Error("Game not started");
  }
  canJoin(game: Game) {
    return !game.players.white || !game.players.black;
  }
  canAbort() {
    return true;
  }
}

class OngoingState implements GameState {
  handleMove(game: Game, move: Move) {
    // Process move
  }
  canJoin() {
    return false;
  }
  canAbort(game: Game) {
    return game.moves.length <= 1;
  }
}

class EndedState implements GameState {
  handleMove() {
    throw new Error("Game ended");
  }
  canJoin() {
    return false;
  }
  canAbort() {
    return false;
  }
}
```

**El≈ëny√∂k**:
- ‚úÖ √Ållapot-specifikus logika
- ‚úÖ Invalid operations prevention
- ‚úÖ Tiszt√°bb k√≥d

**Haszn√°lati eset**: Game status validation (waiting, ongoing, ended)

---

#### 15.2.7 Middleware Pattern
**C√©l**: Request/Response interceptors

```typescript
// Aj√°nlott implement√°ci√≥
type Middleware = (context: any, next: () => Promise<any>) => Promise<any>;

class MiddlewareChain {
  private middlewares: Middleware[] = [];
  
  use(middleware: Middleware) {
    this.middlewares.push(middleware);
  }
  
  async execute(context: any) {
    let index = 0;
    const next = async () => {
      if (index < this.middlewares.length) {
        await this.middlewares[index++](context, next);
      }
    };
    await next();
  }
}

// P√©lda middlewares
const authMiddleware: Middleware = async (ctx, next) => {
  if (!ctx.user) throw new Error("Unauthorized");
  await next();
};

const loggingMiddleware: Middleware = async (ctx, next) => {
  console.log("Request:", ctx);
  await next();
  console.log("Response:", ctx);
};

const validationMiddleware: Middleware = async (ctx, next) => {
  if (!isValidMove(ctx.move)) throw new Error("Invalid move");
  await next();
};
```

**El≈ëny√∂k**:
- ‚úÖ Extensible request pipeline
- ‚úÖ Cross-cutting concerns (auth, logging, validation)
- ‚úÖ Reusable middlewares

**Haszn√°lati eset**: Move validation pipeline, API call interceptors

---

#### 15.2.8 Dependency Injection
**C√©l**: Loose coupling, testability

```typescript
// Aj√°nlott implement√°ci√≥
interface IGameRepository {
  save(game: Game): Promise<void>;
  findById(gameId: string): Promise<Game | null>;
}

class FirebaseGameRepository implements IGameRepository {
  async save(game: Game) {
    await set(ref(db, `games/${game.id}`), game);
  }
  
  async findById(gameId: string) {
    const snapshot = await get(ref(db, `games/${gameId}`));
    return snapshot.val();
  }
}

class GameService {
  constructor(private gameRepo: IGameRepository) {}
  
  async createGame(settings: GameSettings) {
    const game = GameFactory.create(settings);
    await this.gameRepo.save(game);
    return game;
  }
}

// Container (haszn√°lat)
const gameRepo = new FirebaseGameRepository();
const gameService = new GameService(gameRepo);

// Teszt (mock injection)
const mockRepo = new MockGameRepository();
const testService = new GameService(mockRepo);
```

**El≈ëny√∂k**:
- ‚úÖ Testability (mock dependencies)
- ‚úÖ Loose coupling
- ‚úÖ Swappable implementations

**Jelenlegi probl√©ma**: Services k√∂zvetlen√ºl haszn√°lj√°k Firebase-t, nem injekt√°lhat√≥

---

#### 15.2.9 Event Emitter Pattern
**C√©l**: Loose coupling komponensek k√∂z√∂tt

```typescript
// Aj√°nlott implement√°ci√≥
class GameEventEmitter extends EventEmitter {
  onMoveComplete(callback: (gameId: string, move: Move) => void) {
    this.on("moveComplete", callback);
  }
  
  onGameEnd(callback: (gameId: string, winner: string) => void) {
    this.on("gameEnd", callback);
  }
  
  emitMoveComplete(gameId: string, move: Move) {
    this.emit("moveComplete", gameId, move);
  }
  
  emitGameEnd(gameId: string, winner: string) {
    this.emit("gameEnd", gameId, winner);
  }
}

// Haszn√°lat
const gameEvents = new GameEventEmitter();

gameEvents.onMoveComplete((gameId, move) => {
  console.log("Move completed:", move);
  // Update UI, play sound, etc.
});

gameEvents.onGameEnd((gameId, winner) => {
  // Show modal, update stats, etc.
});
```

**El≈ëny√∂k**:
- ‚úÖ Decoupled komponensek
- ‚úÖ Event-driven architecture
- ‚úÖ Easy to add listeners

**Haszn√°lati eset**: Game events (move, capture, check, checkmate), Chat messages

---

### 15.3 Anti-Patterns (Elker√ºlend≈ëk)

#### 15.3.1 God Object
**Probl√©ma**: `ChessGame.tsx` t√∫l sok felel≈ëss√©g
- ‚úÖ **Jav√≠tva**: Service layer bevezet√©ssel r√©szben javult
- ‚ö†Ô∏è **M√©g mindig**: 615 sor, sok state

**Megold√°s**: Tov√°bbi sz√©tbont√°s (useGameLogic hook, useTimer hook)

---

#### 15.3.2 Prop Drilling
**Probl√©ma**: Props √°tad√°s sok szinten kereszt√ºl

```typescript
<ChessGame>
  <ChessGameView onMove={handleMove}>
    <MoveHistory onViewMove={handleViewMove}>
      <MoveItem onClick={...} />
```

**Megold√°s**: Context API vagy State Management (Redux, Zustand)

---

#### 15.3.3 Magic Numbers
**Probl√©ma**: Hardcoded √©rt√©kek

```typescript
// Bad
if (timeLeft < 20000) { ... }

// Good
const TIME_WARNING_THRESHOLD_MS = 20000;
if (timeLeft < TIME_WARNING_THRESHOLD_MS) { ... }
```

**Jav√≠t√°s**: Constants f√°jl l√©trehoz√°sa

---

### 15.4 √ñsszefoglal√≥ T√°bl√°zat

| Minta | Haszn√°lva? | Implement√°ci√≥ | Aj√°nlott? |
|-------|-----------|---------------|-----------|
| Singleton | ‚úÖ Yes | Services | ‚úÖ Keep |
| Service Layer | ‚úÖ Yes | gameService, playerService | ‚úÖ Keep |
| Presentational/Container | ‚úÖ Yes | ChessGame/ChessGameView | ‚úÖ Keep |
| Observer | ‚úÖ Yes | Firebase listeners | ‚úÖ Keep |
| Custom Hooks | ‚úÖ Partial | useAuth | ‚úÖ Expand |
| Composition | ‚úÖ Yes | Layout, Modals | ‚úÖ Keep |
| Strategy | ‚úÖ Implicit | Game end logic | ‚úÖ Make explicit |
| Module | ‚úÖ Yes | services/index.ts | ‚úÖ Keep |
| Repository | ‚ùå No | - | üî• High priority |
| Factory | ‚ùå No | - | ‚ö° Medium priority |
| Facade | ‚ùå No | - | ‚ö° Medium priority |
| Decorator | ‚ùå No | - | ‚ú® Nice to have |
| Command | ‚ùå No | - | ‚ú® Nice to have |
| State | ‚ùå No | - | ‚ö° Medium priority |
| Middleware | ‚ùå No | - | ‚ú® Nice to have |
| Dependency Injection | ‚ùå No | - | üî• High priority |
| Event Emitter | ‚ùå No | - | ‚ö° Medium priority |

---

## 16. √ñsszefoglal√°s

### 16.1 Projekt M√©ret
- **Komponensek**: ~25
- **Services**: 5
- **Oldalak**: 7
- **Lines of Code**: ~8000+ (becs√ºlt)

### 16.2 Technol√≥giai √âretts√©g
- ‚úÖ Modern React (19.x)
- ‚úÖ TypeScript strict mode
- ‚úÖ Firebase integr√°ci√≥
- ‚úÖ Service layer architecture
- ‚úÖ Real-time sync
- ‚úÖ Singleton pattern (Services)
- ‚úÖ Presentational/Container pattern
- ‚ö†Ô∏è Hi√°nyos tesztek
- ‚ö†Ô∏è Biztons√°gi r√©sek
- ‚ö†Ô∏è Nincs Repository pattern
- ‚ö†Ô∏è Nincs Dependency Injection

### 16.3 Production Ready?
**R√©szben**:
- ‚úÖ Core funkci√≥k m≈±k√∂dnek
- ‚úÖ Deploy-olhat√≥
### 16.4 K√∂vetkez≈ë L√©p√©sek (Priorit√°s szerint)

1. **üî• Kritikus**:
   - Firebase Security Rules jav√≠t√°s
   - Error boundary implement√°l√°s
   - Loading states minden√ºtt
   - Repository Pattern bevezet√©se
   - Dependency Injection implement√°l√°s

2. **‚ö° Fontos**:
   - Chat backend implement√°l√°s
   - Unit tesztek (legal√°bb service layer)
   - Dark mode implement√°l√°s
   - Factory Pattern objektum l√©trehoz√°shoz
   - State Pattern j√°t√©k √°llapot kezel√©shez
   - Facade Pattern service orchestration-h√∂z

3. **‚ú® Nice to have**:
   - AI hint gomb
   - Game analysis
   - Friend system
   - PWA support
   - Command Pattern (Undo/Redo)
   - Event Emitter Pattern
   - Decorator Pattern (logging, caching)

---

**Dokumentum Verzi√≥**: 2.0.0  
**Utols√≥ Friss√≠t√©s**: 2025-10-17  
**Szerz≈ë**: GitHub Copilot (k√≥d alapj√°n gener√°lva)

**Changelog**:
- **v2.0.0** (2025-10-17): Tervez√©si mint√°k szakasz hozz√°adva (15. fejezet)
- **v1.0.0** (2025-10-17): Kezdeti verzi√≥

**Dokumentum Verzi√≥**: 1.0.0  
**Utols√≥ Friss√≠t√©s**: 2025-10-17  
**Szerz≈ë**: GitHub Copilot (k√≥d alapj√°n gener√°lva)

